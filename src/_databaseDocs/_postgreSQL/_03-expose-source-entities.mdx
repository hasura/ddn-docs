### Step 1. Start the services

With all our configuration taken care of, we have a blank slate with which to iterate on our API using this single
source. Let's start developing our API by starting all our services, which includes the GraphQL engine, an
authentication webhook provider, Jaeger for observability, and our connector. Run the following from the root of the
project:

```bash
docker compose -f docker-compose.hasura.yaml watch
```

You should see your various services returned as `Running` or `Started` in the terminal. This provides a watch mode,
which will allow us to iteratively modify and test our API locally with blazing-fast feedback loops ðŸš€

### Step 2. Add a model

Hasura DDN works by creating immutable builds, similar to git commits, based on changes to your project's metadata. This
frees you to iteratively and rapidly test incremental changes to your API without causing disruption to other
collaborators or downstream consumers. Before we create a supergraph build, let's first add a
[**model**](https://hasura.io/docs/3.0/supergraph-modeling/models/) to our subgraph.

Models serve as the link between your data connector and the API Hasura generates. For PostgreSQL, models typically
correspond to tables, but you can also create them for views and
[native queries](https://hasura.io/docs/3.0/connectors/postgresql/native-queries/).

If you look in your `<subgraph>/connector/mypg/connector/mypg.hml` file, you'll see `object_types` for each table in
your PostgreSQL database. For each of these, you can run the following command to create a model:

```bash
ddn model add --connector-link mypg --name <object_type>
```

:::tip Casing matters

When adding a model, it is critical to use the same casing as the `object_type` from your connector's configuration
file.

:::

<details>
  <summary>
    Each time you add a model, you'll see a new named file in the `models` directory of your connector. For example, if we
    ran the previous command on the `carts` type, we'd then see a `Carts.hml` file that contains all the metadata Hasura DDN
    needs to add it to our API. Click here to see an example `hml` file.
  </summary>

```yaml
# Carts.
---
kind: ObjectType
version: v1
definition:
  name: Carts
  fields:
    - name: createdAt
      type: Timestamptz
    - name: id
      type: Uuid!
    - name: isComplete
      type: Bool!
    - name: isReminderSent
      type: Bool!
    - name: updatedAt
      type: Timestamptz
    - name: userId
      type: Uuid!
  graphql:
    typeName: App_Carts
    inputTypeName: App_CartsInput
  dataConnectorTypeMapping:
    - dataConnectorName: pg_connector
      dataConnectorObjectType: carts
      fieldMapping:
        createdAt:
          column:
            name: created_at
        id:
          column:
            name: id
        isComplete:
          column:
            name: is_complete
        isReminderSent:
          column:
            name: is_reminder_sent
        updatedAt:
          column:
            name: updated_at
        userId:
          column:
            name: user_id

---
kind: TypePermissions
version: v1
definition:
  typeName: Carts
  permissions:
    - role: admin
      output:
        allowedFields:
          - createdAt
          - id
          - isComplete
          - isReminderSent
          - updatedAt
          - userId

---
kind: ObjectBooleanExpressionType
version: v1
definition:
  name: CartsBoolExp
  objectType: Carts
  dataConnectorName: pg_connector
  dataConnectorObjectType: carts
  comparableFields:
    - fieldName: createdAt
      operators:
        enableAll: true
    - fieldName: id
      operators:
        enableAll: true
    - fieldName: isComplete
      operators:
        enableAll: true
    - fieldName: isReminderSent
      operators:
        enableAll: true
    - fieldName: updatedAt
      operators:
        enableAll: true
    - fieldName: userId
      operators:
        enableAll: true
  graphql:
    typeName: App_CartsBoolExp

---
kind: Model
version: v1
definition:
  name: Carts
  objectType: Carts
  source:
    dataConnectorName: pg_connector
    collection: carts
  filterExpressionType: CartsBoolExp
  orderableFields:
    - fieldName: createdAt
      orderByDirections:
        enableAll: true
    - fieldName: id
      orderByDirections:
        enableAll: true
    - fieldName: isComplete
      orderByDirections:
        enableAll: true
    - fieldName: isReminderSent
      orderByDirections:
        enableAll: true
    - fieldName: updatedAt
      orderByDirections:
        enableAll: true
    - fieldName: userId
      orderByDirections:
        enableAll: true
  graphql:
    selectMany:
      queryRootField: app_carts
    selectUniques:
      - queryRootField: app_cartsById
        uniqueIdentifier:
          - id
    orderByExpressionType: App_CartsOrderBy

---
kind: ModelPermissions
version: v1
definition:
  modelName: Carts
  permissions:
    - role: admin
      select:
        filter: null
```

</details>
