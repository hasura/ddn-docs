## Metadata structure

### ModelV1

The definition of a data model. A data model is a collection of objects of a particular type. Models can support one or
more CRUD operations.

| Name               | Type                                                     | Required | Description                                                                                     |
| ------------------ | -------------------------------------------------------- | -------- | ----------------------------------------------------------------------------------------------- |
| `name`             | string                                                   | true     | The name of the data model.                                                                     |
| `objectType`       | string                                                   | true     | The type of the objects of which this model is a collection.                                    |
| `globalIdSource`   | boolean                                                  | false    | Whether this model should be used as the global ID source for all objects of its type.          |
| `arguments`        | [[ArgumentDefinition](#argumentdefinition)]              | false    | A list of arguments accepted by this model. Defaults to no arguments.                           |
| `source`           | [ModelSource](#modelsource) / null                       | false    | The source configuration for this model.                                                        |
| `filterableFields` | [[FilterableField](#filterablefield)]                    | true     | A list of fields that can be used to filter the objects in this model.                          |
| `orderableFields`  | [[OrderableField](#orderablefield)]                      | true     | A list of fields that can be used to order the objects in this model.                           |
| `graphql`          | [ModelGraphQlDefinition](#modelgraphqldefinition) / null | false    | Configuration for how this model should appear in the GraphQL schema.                           |
| `description`      | string                                                   | false    | The description of the model. Gets added to the description of the model in the graphql schema. |

**Example**

```yaml
name: Articles
objectType: article
globalIdSource: true
arguments: []
source:
  dataConnectorName: data_connector
  collection: articles
  typeMapping:
    article:
      fieldMapping:
        article_id:
          column: id
        title:
          column: title
        author_id:
          column: author_id
  argumentMapping: {}
filterableFields:
  - fieldName: article_id
    operators:
      enableAll: true
  - fieldName: title
    operators:
      enableAll: true
  - fieldName: author_id
    operators:
      enableAll: true
orderableFields:
  - fieldName: article_id
    orderByDirections:
      enableAll: true
  - fieldName: title
    orderByDirections:
      enableAll: true
  - fieldName: author_id
    orderByDirections:
      enableAll: true
graphql:
  selectUniques:
    - queryRootField: ArticleByID
      uniqueIdentifier:
        - article_id
      description: Description for the select unique ArticleByID
  selectMany:
    queryRootField: ArticleMany
    description: Description for the select many ArticleMany
  argumentsInputType: null
  filterExpressionType: Article_Where_Exp
  orderByExpressionType: Article_Order_By
description: Description for the model Articles
```

### ModelGraphQlDefinition

The definition of how a model appears in the GraphQL API.

| Name                    | Type                                                               | Required | Description                                                                                                                                    |
| ----------------------- | ------------------------------------------------------------------ | -------- | ---------------------------------------------------------------------------------------------------------------------------------------------- |
| `selectUniques`         | [[SelectUniqueGraphQlDefinition](#selectuniquegraphqldefinition)]  | true     | For each select unique defined here, a query root field is added to the GraphQL API that can be used to select a unique object from the model. |
| `selectMany`            | [SelectManyGraphQlDefinition](#selectmanygraphqldefinition) / null | false    | Select many configuration for a model adds a query root field to the GraphQl API that can be used to retrieve multiple objects from the model. |
| `argumentsInputType`    | string / null                                                      | false    | The type name of the input type used to hold the arguments of the model.                                                                       |
| `filterExpressionType`  | string / null                                                      | false    | The type name of the filter boolean expression input type.                                                                                     |
| `orderByExpressionType` | string / null                                                      | false    | The type name of the order by expression input type.                                                                                           |

**Example**

```yaml
selectUniques:
  - queryRootField: ArticleByID
    uniqueIdentifier:
      - article_id
    description: Description for the select unique ArticleByID
selectMany:
  queryRootField: ArticleMany
  description: Description for the select many ArticleMany
argumentsInputType: null
filterExpressionType: Article_Where_Exp
orderByExpressionType: Article_Order_By
```

### SelectManyGraphQlDefinition

The definition of the GraphQL API for selecting rows from a model.

| Name             | Type   | Required | Description                                                                                                                                                         |
| ---------------- | ------ | -------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `queryRootField` | string | true     | The name of the query root field for this API.                                                                                                                      |
| `description`    | string | false    | The description of the select many graphql definition of the model. Gets added to the description of the select many root field of the model in the graphql schema. |

### SelectUniqueGraphQlDefinition

The definition of the GraphQL API for selecting a unique row/object from a model.

| Name               | Type     | Required | Description                                                                                                                                                             |
| ------------------ | -------- | -------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `queryRootField`   | string   | true     | The name of the query root field for this API.                                                                                                                          |
| `uniqueIdentifier` | [string] | true     | A set of fields which can uniquely identify a row/object in the model.                                                                                                  |
| `description`      | string   | false    | The description of the select unique graphql definition of the model. Gets added to the description of the select unique root field of the model in the graphql schema. |

### OrderableField

| Name                | Type                                        | Required | Description |
| ------------------- | ------------------------------------------- | -------- | ----------- |
| `fieldName`         | string                                      | true     |             |
| `orderByDirections` | [EnableAllOrSpecific](#enableallorspecific) | true     |             |

### FilterableField

| Name        | Type                                        | Required | Description |
| ----------- | ------------------------------------------- | -------- | ----------- |
| `fieldName` | string                                      | true     |             |
| `operators` | [EnableAllOrSpecific](#enableallorspecific) | true     |             |

### EnableAllOrSpecific

Must have exactly one of the following fields:

| Name             | Type     | Required | Description |
| ---------------- | -------- | -------- | ----------- |
| `enableAll`      | boolean  | false    |             |
| `enableSpecific` | [string] | false    |             |

### ModelSource

Description of how a model maps to a particular data connector

| Name                | Type                    | Required | Description                                                                            |
| ------------------- | ----------------------- | -------- | -------------------------------------------------------------------------------------- |
| `dataConnectorName` | string                  | true     | The name of the data connector backing this model.                                     |
| `collection`        | string                  | true     | The collection in the data connector that backs this model.                            |
| `typeMapping`       | [undefined](#undefined) | false    | How the various types used in this model correspond to entities in the data connector. |
| `argumentMapping`   | [undefined](#undefined) | false    |                                                                                        |

**Example**

```yaml
dataConnectorName: data_connector
collection: articles
typeMapping:
  article:
    fieldMapping:
      article_id:
        column: id
      title:
        column: title
      author_id:
        column: author_id
argumentMapping: {}
```

### undefined

| Name          | Type   | Required | Description |
| ------------- | ------ | -------- | ----------- |
| `<customKey>` | string | false    |             |

### undefined

How the various types used in this model correspond to entities in the data connector.

| Name          | Type                        | Required | Description |
| ------------- | --------------------------- | -------- | ----------- |
| `<customKey>` | [TypeMapping](#typemapping) | false    |             |

### TypeMapping

| Name           | Type                    | Required | Description |
| -------------- | ----------------------- | -------- | ----------- |
| `fieldMapping` | [undefined](#undefined) | true     |             |

### undefined

| Name          | Type                                      | Required | Description |
| ------------- | ----------------------------------------- | -------- | ----------- |
| `<customKey>` | [ObjectFieldMapping](#objectfieldmapping) | false    |             |

### ObjectFieldMapping

| Name     | Type   | Required | Description |
| -------- | ------ | -------- | ----------- |
| `column` | string | true     |             |

### ArgumentDefinition

The definition of an argument for a field, command, or model.

| Name          | Type   | Required | Description |
| ------------- | ------ | -------- | ----------- |
| `name`        | string | true     |             |
| `type`        | string | true     |             |
| `description` | string | false    |             |

### ObjectTypeV1

Definition of a user-defined Open DD object type.

| Name             | Type                                                                     | Required | Description                                                                                                                                                                                                                                                                                      |
| ---------------- | ------------------------------------------------------------------------ | -------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| `name`           | string                                                                   | true     | The name to give this object type, used to refer to it elsewhere in the metadata. Must be unique across all types defined in this subgraph.                                                                                                                                                      |
| `fields`         | [[ObjectFieldDefinition](#objectfielddefinition)]                        | true     | The list of fields defined for this object type.                                                                                                                                                                                                                                                 |
| `globalIdFields` | [string]                                                                 | false    | The subset of fields that uniquely identify this object in the domain. Setting this property will automatically implement the GraphQL Relay Node interface for this object type and add an `id` global ID field. If setting this property, there must not be a field named `id` already present. |
| `graphql`        | [ObjectTypeGraphQLConfiguration](#objecttypegraphqlconfiguration) / null | false    | Configuration for how this object type should appear in the GraphQL schema.                                                                                                                                                                                                                      |
| `description`    | string                                                                   | false    | The description of the object. Gets added to the description of the object's definition in the graphql schema.                                                                                                                                                                                   |

**Example**

```yaml
name: Author
fields:
  - name: author_id
    type: Int!
    description: The id of the author
  - name: first_name
    type: String
    description: The first name of the author
  - name: last_name
    type: String
    description: The last name of the author
globalIdFields:
  - author_id
graphql:
  typeName: Author
  inputTypeName: null
description: An author of a book
```

### ObjectTypeGraphQLConfiguration

GraphQL configuration of an Open DD object type.

| Name            | Type          | Required | Description                                                                                             |
| --------------- | ------------- | -------- | ------------------------------------------------------------------------------------------------------- |
| `typeName`      | string / null | false    | The name to use for the GraphQL type representation of this object type when used in an output context. |
| `inputTypeName` | string / null | false    | The name to use for the GraphQL type representation of this object type when used in an input context.  |

### ObjectFieldDefinition

The definition of a field in a user-defined object type.

| Name          | Type   | Required | Description                                                                                                                                                   |
| ------------- | ------ | -------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `name`        | string | true     | The name of the field. This name is used both when referring to the field elsewhere in the metadata and when creating the corresponding GraphQl type.         |
| `type`        | string | true     | The type of this field. This uses the GraphQL syntax to represent field types and must refer to one of the inbuilt OpenDd types or another user-defined type. |
| `description` | string | false    | The description of this field. Gets added to the description of the field's definition in the graphql schema.                                                 |

### ScalarTypeGraphQLConfiguration

GraphQL configuration of an Open DD scalar type

| Name       | Type   | Required | Description                                          |
| ---------- | ------ | -------- | ---------------------------------------------------- |
| `typeName` | string | true     | The name of the GraphQl type to use for this scalar. |

### ScalarTypeV1

Definition of a user-defined scalar type that that has opaque semantics.

| Name          | Type                                                                     | Required | Description                                                                                                                                 |
| ------------- | ------------------------------------------------------------------------ | -------- | ------------------------------------------------------------------------------------------------------------------------------------------- |
| `name`        | string                                                                   | true     | The name to give this scalar type, used to refer to it elsewhere in the metadata. Must be unique across all types defined in this subgraph. |
| `graphql`     | [ScalarTypeGraphQLConfiguration](#scalartypegraphqlconfiguration) / null | false    | Configuration for how this scalar type should appear in the GraphQL schema.                                                                 |
| `description` | string                                                                   | false    | The description of this scalar. Gets added to the description of the scalar's definition in the graphql schema.                             |

**Example**

```yaml
name: CustomString
graphql:
  typeName: CustomString
description: A custom string type
```
