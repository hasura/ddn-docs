## Metadata structure

### DataConnectorLinkV1

Definition of a data connector - version 1.

| Name      | Type                                                              | Required | Description                                                                                                                                                    |
| --------- | ----------------------------------------------------------------- | -------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `name`    | string                                                            | true     | The name of the data connector.                                                                                                                                |
| `url`     | [DataConnectorUrlV1](#dataconnectorurlv1)                         | true     | The url(s) to access the data connector.                                                                                                                       |
| `headers` | [undefined](#undefined)                                           | false    | Key value map of HTTP headers to be sent with each request to the data connector.                                                                              |
| `schema`  | [VersionedSchemaAndCapabilities](#versionedschemaandcapabilities) | true     | The schema of the data connector. This schema is used as the source of truth when serving requests and the live schema of the data connector is not looked up. |

**Example**

```yaml
name: data_connector
url:
  singleUrl:
    value: http://data_connector:8100
headers: {}
schema:
  version: v0.1
  schema:
    scalar_types: {}
    object_types: {}
    collections: []
    functions: []
    procedures: []
  capabilities:
    versions: '*'
    capabilities:
      query:
        variables: {}
```

### VersionedSchemaAndCapabilities

The schema of the data connector. This schema is used as the source of truth when serving requests and the live schema
of the data connector is not looked up.

[SchemaAndCapabilitiesV01](#schemaandcapabilitiesv01)

### SchemaAndCapabilitiesV01

| Name           | Type                                            | Required | Description |
| -------------- | ----------------------------------------------- | -------- | ----------- |
| `version`      | string                                          | true     |             |
| `schema`       | [Schema Response](#schema-response)             | true     |             |
| `capabilities` | [Capabilities Response](#capabilities-response) | true     |             |

### Capabilities Response

| Name           | Type                          | Required | Description |
| -------------- | ----------------------------- | -------- | ----------- |
| `versions`     | string                        | true     |             |
| `capabilities` | [Capabilities](#capabilities) | true     |             |

### Capabilities

Describes the features of the specification which a data connector implements.

| Name            | Type                                                           | Required | Description |
| --------------- | -------------------------------------------------------------- | -------- | ----------- |
| `query`         | [Query Capabilities](#query-capabilities)                      | true     |             |
| `explain`       | [LeafCapability](#leafcapability) / null                       | false    |             |
| `relationships` | [Relationship Capabilities](#relationship-capabilities) / null | false    |             |

### Relationship Capabilities

| Name                   | Type                                     | Required | Description                                                                          |
| ---------------------- | ---------------------------------------- | -------- | ------------------------------------------------------------------------------------ |
| `relation_comparisons` | [LeafCapability](#leafcapability) / null | false    | Does the connector support comparisons that involve related collections (ie. joins)? |
| `order_by_aggregate`   | [LeafCapability](#leafcapability) / null | false    | Does the connector support ordering by an aggregated array relationship?             |

### Query Capabilities

| Name         | Type                                     | Required | Description                                            |
| ------------ | ---------------------------------------- | -------- | ------------------------------------------------------ |
| `aggregates` | [LeafCapability](#leafcapability) / null | false    | Does the connector support aggregate queries           |
| `variables`  | [LeafCapability](#leafcapability) / null | false    | Does the connector support queries which use variables |

### LeafCapability

A unit value to indicate a particular leaf capability is supported. This is an empty struct to allow for future
sub-capabilities.

| Name | Type | Required | Description |
| ---- | ---- | -------- | ----------- |

### Schema Response

| Name           | Type                                  | Required | Description                                                                                                                                         |
| -------------- | ------------------------------------- | -------- | --------------------------------------------------------------------------------------------------------------------------------------------------- |
| `scalar_types` | [undefined](#undefined)               | true     | A list of scalar types which will be used as the types of collection columns                                                                        |
| `object_types` | [undefined](#undefined)               | true     | A list of object types which can be used as the types of arguments, or return types of procedures. Names should not overlap with scalar type names. |
| `collections`  | [[Collection Info](#collection-info)] | true     | Collections which are available for queries                                                                                                         |
| `functions`    | [[Function Info](#function-info)]     | true     | Functions (i.e. collections which return a single column and row)                                                                                   |
| `procedures`   | [[Procedure Info](#procedure-info)]   | true     | Procedures which are available for execution as part of mutations                                                                                   |

### Procedure Info

| Name          | Type                    | Required | Description                                 |
| ------------- | ----------------------- | -------- | ------------------------------------------- |
| `name`        | string                  | true     | The name of the procedure                   |
| `description` | string                  | false    | Column description                          |
| `arguments`   | [undefined](#undefined) | true     | Any arguments that this collection requires |
| `result_type` | [Type](#type)           | true     | The name of the result type                 |

### undefined

Any arguments that this collection requires

| Name          | Type                            | Required | Description |
| ------------- | ------------------------------- | -------- | ----------- |
| `<customKey>` | [Argument Info](#argument-info) | false    |             |

### Function Info

| Name          | Type                    | Required | Description                                 |
| ------------- | ----------------------- | -------- | ------------------------------------------- |
| `name`        | string                  | true     | The name of the function                    |
| `description` | string                  | false    | Description of the function                 |
| `arguments`   | [undefined](#undefined) | true     | Any arguments that this collection requires |
| `result_type` | [Type](#type)           | true     | The name of the function's result type      |

### undefined

Any arguments that this collection requires

| Name          | Type                            | Required | Description |
| ------------- | ------------------------------- | -------- | ----------- |
| `<customKey>` | [Argument Info](#argument-info) | false    |             |

### Collection Info

| Name   | Type   | Required | Description                |
| ------ | ------ | -------- | -------------------------- |
| `name` | string | true     | The name of the collection |

Note: these names are abstract - there is no requirement that this name correspond to the name of an actual collection
in the database. | | `description` | string | false | Description of the collection | | `arguments` |
[undefined](#undefined) | true | Any arguments that this collection requires | | `type` | string | true | The name of
the collection's object type | | `uniqueness_constraints` | [undefined](#undefined) | true | Any uniqueness constraints
enforced on this collection | | `foreign_keys` | [undefined](#undefined) | true | Any foreign key constraints enforced
on this collection |

### undefined

Any foreign key constraints enforced on this collection

| Name          | Type                                              | Required | Description |
| ------------- | ------------------------------------------------- | -------- | ----------- |
| `<customKey>` | [Foreign Key Constraint](#foreign-key constraint) | false    |             |

### Foreign Key Constraint

| Name                 | Type                    | Required | Description                                                   |
| -------------------- | ----------------------- | -------- | ------------------------------------------------------------- |
| `column_mapping`     | [undefined](#undefined) | true     | The columns on which you want want to define the foreign key. |
| `foreign_collection` | string                  | true     | The name of a collection                                      |

### undefined

The columns on which you want want to define the foreign key.

| Name          | Type   | Required | Description |
| ------------- | ------ | -------- | ----------- |
| `<customKey>` | string | false    |             |

### undefined

Any uniqueness constraints enforced on this collection

| Name          | Type                                            | Required | Description |
| ------------- | ----------------------------------------------- | -------- | ----------- |
| `<customKey>` | [Uniqueness Constraint](#uniqueness-constraint) | false    |             |

### Uniqueness Constraint

| Name             | Type     | Required | Description                                                   |
| ---------------- | -------- | -------- | ------------------------------------------------------------- |
| `unique_columns` | [string] | true     | A list of columns which this constraint requires to be unique |

### undefined

Any arguments that this collection requires

| Name          | Type                            | Required | Description |
| ------------- | ------------------------------- | -------- | ----------- |
| `<customKey>` | [Argument Info](#argument-info) | false    |             |

### Argument Info

| Name          | Type          | Required | Description                           |
| ------------- | ------------- | -------- | ------------------------------------- |
| `description` | string        | false    | Argument description                  |
| `type`        | [Type](#type) | true     | The name of the type of this argument |

### undefined

A list of object types which can be used as the types of arguments, or return types of procedures. Names should not
overlap with scalar type names.

| Name          | Type                        | Required | Description |
| ------------- | --------------------------- | -------- | ----------- |
| `<customKey>` | [Object Type](#object-type) | false    |             |

### Object Type

The definition of an object type

| Name          | Type                    | Required | Description                        |
| ------------- | ----------------------- | -------- | ---------------------------------- |
| `description` | string                  | false    | Description of this type           |
| `fields`      | [undefined](#undefined) | true     | Fields defined on this object type |

### undefined

Fields defined on this object type

| Name          | Type                          | Required | Description |
| ------------- | ----------------------------- | -------- | ----------- |
| `<customKey>` | [Object Field](#object-field) | false    |             |

### Object Field

The definition of an object field

| Name          | Type          | Required | Description               |
| ------------- | ------------- | -------- | ------------------------- |
| `description` | string        | false    | Description of this field |
| `type`        | [Type](#type) | true     | The type of this field    |

### undefined

A list of scalar types which will be used as the types of collection columns

| Name          | Type                        | Required | Description |
| ------------- | --------------------------- | -------- | ----------- |
| `<customKey>` | [Scalar Type](#scalar-type) | false    |             |

### Scalar Type

The definition of a scalar type, i.e. types that can be used as the types of columns.

| Name                   | Type                    | Required | Description                                                                                                                                      |
| ---------------------- | ----------------------- | -------- | ------------------------------------------------------------------------------------------------------------------------------------------------ |
| `aggregate_functions`  | [undefined](#undefined) | true     | A map from aggregate function names to their definitions. Result type names must be defined scalar types declared in ScalarTypesCapabilities.    |
| `comparison_operators` | [undefined](#undefined) | true     | A map from comparison operator names to their definitions. Argument type names must be defined scalar types declared in ScalarTypesCapabilities. |

### undefined

A map from comparison operator names to their definitions. Argument type names must be defined scalar types declared in
ScalarTypesCapabilities.

| Name          | Type                                                              | Required | Description |
| ------------- | ----------------------------------------------------------------- | -------- | ----------- |
| `<customKey>` | [Comparison Operator Definition](#comparison-operator definition) | false    |             |

### Comparison Operator Definition

The definition of a comparison operator on a scalar type

| Name            | Type          | Required | Description                               |
| --------------- | ------------- | -------- | ----------------------------------------- |
| `argument_type` | [Type](#type) | true     | The type of the argument to this operator |

### undefined

A map from aggregate function names to their definitions. Result type names must be defined scalar types declared in
ScalarTypesCapabilities.

| Name          | Type                                                            | Required | Description |
| ------------- | --------------------------------------------------------------- | -------- | ----------- |
| `<customKey>` | [Aggregate Function Definition](#aggregate-function definition) | false    |             |

### Aggregate Function Definition

The definition of an aggregation function on a scalar type

| Name          | Type          | Required | Description                                              |
| ------------- | ------------- | -------- | -------------------------------------------------------- |
| `result_type` | [Type](#type) | true     | The scalar or object type of the result of this function |

### Type

Types track the valid representations of values as JSON

[undefined](#undefined) / [undefined](#undefined) / [undefined](#undefined)

### undefined

An array type

| Name           | Type          | Required | Description                           |
| -------------- | ------------- | -------- | ------------------------------------- |
| `type`         | string        | true     |                                       |
| `element_type` | [Type](#type) | true     | The type of the elements of the array |

### undefined

A nullable type

| Name              | Type          | Required | Description                                       |
| ----------------- | ------------- | -------- | ------------------------------------------------- |
| `type`            | string        | true     |                                                   |
| `underlying_type` | [Type](#type) | true     | The type of the non-null inhabitants of this type |

### undefined

A named type

| Name   | Type   | Required | Description                                             |
| ------ | ------ | -------- | ------------------------------------------------------- |
| `type` | string | true     |                                                         |
| `name` | string | true     | The name can refer to a primitive type or a scalar type |

### undefined

Key value map of HTTP headers to be sent with each request to the data connector.

| Name          | Type                                  | Required | Description |
| ------------- | ------------------------------------- | -------- | ----------- |
| `<customKey>` | [EnvironmentValue](#environmentvalue) | false    |             |

### DataConnectorUrlV1

The url(s) to access the data connector.

Must have exactly one of the following fields:

| Name            | Type                                  | Required | Description |
| --------------- | ------------------------------------- | -------- | ----------- |
| `singleUrl`     | [EnvironmentValue](#environmentvalue) | false    |             |
| `readWriteUrls` | [ReadWriteUrls](#readwriteurls)       | false    |             |

### ReadWriteUrls

| Name    | Type                                  | Required | Description |
| ------- | ------------------------------------- | -------- | ----------- |
| `read`  | [EnvironmentValue](#environmentvalue) | true     |             |
| `write` | [EnvironmentValue](#environmentvalue) | true     |             |

### EnvironmentValue

Either a literal string or a reference to a Hasura secret

Must have exactly one of the following fields:

| Name           | Type   | Required | Description |
| -------------- | ------ | -------- | ----------- |
| `value`        | string | false    |             |
| `valueFromEnv` | string | false    |             |

### TypePermissionsV1

Definition of permissions for an OpenDD type.

| Name          | Type                                | Required | Description                                                                           |
| ------------- | ----------------------------------- | -------- | ------------------------------------------------------------------------------------- |
| `typeName`    | string                              | true     | The name of the type for which permissions are being defined. Must be an object type. |
| `permissions` | [[TypePermission](#typepermission)] | true     | A list of type permissions, one for each role.                                        |

**Example**

```yaml
typeName: article
permissions:
  - role: admin
    output:
      allowedFields:
        - article_id
        - author_id
        - title
  - role: user
    output:
      allowedFields:
        - article_id
        - author_id
```

### TypePermission

Defines permissions for a particular role for a type.

| Name     | Type                                                 | Required | Description                                                                                                                                   |
| -------- | ---------------------------------------------------- | -------- | --------------------------------------------------------------------------------------------------------------------------------------------- |
| `role`   | string                                               | true     | The role for which permissions are being defined.                                                                                             |
| `output` | [TypeOutputPermission](#typeoutputpermission) / null | false    | Permissions for this role when this type is used in an output context. If null, this type is inaccessible for this role in an output context. |

**Example**

```yaml
role: user
output:
  allowedFields:
    - article_id
    - author_id
```

### TypeOutputPermission

Permissions for a type for a particular role when used in an output context.

| Name            | Type     | Required | Description                                       |
| --------------- | -------- | -------- | ------------------------------------------------- |
| `allowedFields` | [string] | true     | Fields of the type that are accessible for a role |

### CommandV1

Definition of an OpenDD Command, which is a custom operation that can take arguments and returns an output. The
semantics of a command are opaque to OpenDD.

| Name          | Type                                                         | Required | Description                                                                                                      |
| ------------- | ------------------------------------------------------------ | -------- | ---------------------------------------------------------------------------------------------------------------- |
| `name`        | string                                                       | true     | The name of the command.                                                                                         |
| `outputType`  | string                                                       | true     | The return type of the command.                                                                                  |
| `arguments`   | [[ArgumentDefinition](#argumentdefinition)]                  | false    | The list of arguments accepted by this command. Defaults to no arguments.                                        |
| `source`      | [CommandSource](#commandsource) / null                       | false    | The source configuration for this command.                                                                       |
| `graphql`     | [CommandGraphQlDefinition](#commandgraphqldefinition) / null | false    | Configuration for how this command should appear in the GraphQL schema.                                          |
| `description` | string                                                       | false    | The description of the command. Gets added to the description of the command's root field in the graphql schema. |

**Example**

```yaml
name: get_latest_article
outputType: commandArticle
arguments: []
source:
  dataConnectorName: data_connector
  dataConnectorCommand:
    function: latest_article
  typeMapping:
    commandArticle:
      fieldMapping:
        article_id:
          column: id
  argumentMapping: {}
graphql:
  rootFieldName: getLatestArticle
  rootFieldKind: Query
description: Get the latest article
```

### CommandGraphQlDefinition

The definition of how a command should appear in the GraphQL API.

| Name            | Type   | Required | Description                                                                   |
| --------------- | ------ | -------- | ----------------------------------------------------------------------------- |
| `rootFieldName` | string | true     | The name of the graphql root field to use for this command.                   |
| `rootFieldKind` | string | true     | Whether to put this command in the Query or Mutation root of the GraphQL API. |

**Example**

```yaml
rootFieldName: getLatestArticle
rootFieldKind: Query
```

### CommandSource

Description of how a command maps to a particular data connector

| Name                   | Type                                          | Required | Description                                                                              |
| ---------------------- | --------------------------------------------- | -------- | ---------------------------------------------------------------------------------------- |
| `dataConnectorName`    | string                                        | true     | The name of the data connector backing this command.                                     |
| `dataConnectorCommand` | [DataConnectorCommand](#dataconnectorcommand) | true     | The function/procedure in the data connector that backs this command.                    |
| `typeMapping`          | [undefined](#undefined)                       | false    | How the various types used in this command correspond to entities in the data connector. |
| `argumentMapping`      | [undefined](#undefined)                       | false    | Mapping from command argument names to data connector table argument names.              |

**Example**

```yaml
dataConnectorName: data_connector
dataConnectorCommand:
  function: latest_article
typeMapping: {}
argumentMapping: {}
```

### undefined

Mapping from command argument names to data connector table argument names.

| Name          | Type   | Required | Description |
| ------------- | ------ | -------- | ----------- |
| `<customKey>` | string | false    |             |

### undefined

How the various types used in this command correspond to entities in the data connector.

| Name          | Type                        | Required | Description |
| ------------- | --------------------------- | -------- | ----------- |
| `<customKey>` | [TypeMapping](#typemapping) | false    |             |

### DataConnectorCommand

The function/procedure in the data connector that backs this command.

Must have exactly one of the following fields:

| Name        | Type   | Required | Description |
| ----------- | ------ | -------- | ----------- |
| `function`  | string | false    |             |
| `procedure` | string | false    |             |

### ModelV1

The definition of a data model. A data model is a collection of objects of a particular type. Models can support one or
more CRUD operations.

| Name               | Type                                                     | Required | Description                                                                                     |
| ------------------ | -------------------------------------------------------- | -------- | ----------------------------------------------------------------------------------------------- |
| `name`             | string                                                   | true     | The name of the data model.                                                                     |
| `objectType`       | string                                                   | true     | The type of the objects of which this model is a collection.                                    |
| `globalIdSource`   | boolean                                                  | false    | Whether this model should be used as the global ID source for all objects of its type.          |
| `arguments`        | [[ArgumentDefinition](#argumentdefinition)]              | false    | A list of arguments accepted by this model. Defaults to no arguments.                           |
| `source`           | [ModelSource](#modelsource) / null                       | false    | The source configuration for this model.                                                        |
| `filterableFields` | [[FilterableField](#filterablefield)]                    | true     | A list of fields that can be used to filter the objects in this model.                          |
| `orderableFields`  | [[OrderableField](#orderablefield)]                      | true     | A list of fields that can be used to order the objects in this model.                           |
| `graphql`          | [ModelGraphQlDefinition](#modelgraphqldefinition) / null | false    | Configuration for how this model should appear in the GraphQL schema.                           |
| `description`      | string                                                   | false    | The description of the model. Gets added to the description of the model in the graphql schema. |

**Example**

```yaml
name: Articles
objectType: article
globalIdSource: true
arguments: []
source:
  dataConnectorName: data_connector
  collection: articles
  typeMapping:
    article:
      fieldMapping:
        article_id:
          column: id
        title:
          column: title
        author_id:
          column: author_id
  argumentMapping: {}
filterableFields:
  - fieldName: article_id
    operators:
      enableAll: true
  - fieldName: title
    operators:
      enableAll: true
  - fieldName: author_id
    operators:
      enableAll: true
orderableFields:
  - fieldName: article_id
    orderByDirections:
      enableAll: true
  - fieldName: title
    orderByDirections:
      enableAll: true
  - fieldName: author_id
    orderByDirections:
      enableAll: true
graphql:
  selectUniques:
    - queryRootField: ArticleByID
      uniqueIdentifier:
        - article_id
      description: Description for the select unique ArticleByID
  selectMany:
    queryRootField: ArticleMany
    description: Description for the select many ArticleMany
  argumentsInputType: null
  filterExpressionType: Article_Where_Exp
  orderByExpressionType: Article_Order_By
description: Description for the model Articles
```

### ModelGraphQlDefinition

The definition of how a model appears in the GraphQL API.

| Name                    | Type                                                               | Required | Description                                                                                                                                    |
| ----------------------- | ------------------------------------------------------------------ | -------- | ---------------------------------------------------------------------------------------------------------------------------------------------- |
| `selectUniques`         | [[SelectUniqueGraphQlDefinition](#selectuniquegraphqldefinition)]  | true     | For each select unique defined here, a query root field is added to the GraphQL API that can be used to select a unique object from the model. |
| `selectMany`            | [SelectManyGraphQlDefinition](#selectmanygraphqldefinition) / null | false    | Select many configuration for a model adds a query root field to the GraphQl API that can be used to retrieve multiple objects from the model. |
| `argumentsInputType`    | string / null                                                      | false    | The type name of the input type used to hold the arguments of the model.                                                                       |
| `filterExpressionType`  | string / null                                                      | false    | The type name of the filter boolean expression input type.                                                                                     |
| `orderByExpressionType` | string / null                                                      | false    | The type name of the order by expression input type.                                                                                           |

**Example**

```yaml
selectUniques:
  - queryRootField: ArticleByID
    uniqueIdentifier:
      - article_id
    description: Description for the select unique ArticleByID
selectMany:
  queryRootField: ArticleMany
  description: Description for the select many ArticleMany
argumentsInputType: null
filterExpressionType: Article_Where_Exp
orderByExpressionType: Article_Order_By
```

### SelectManyGraphQlDefinition

The definition of the GraphQL API for selecting rows from a model.

| Name             | Type   | Required | Description                                                                                                                                                         |
| ---------------- | ------ | -------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `queryRootField` | string | true     | The name of the query root field for this API.                                                                                                                      |
| `description`    | string | false    | The description of the select many graphql definition of the model. Gets added to the description of the select many root field of the model in the graphql schema. |

### SelectUniqueGraphQlDefinition

The definition of the GraphQL API for selecting a unique row/object from a model.

| Name               | Type     | Required | Description                                                                                                                                                             |
| ------------------ | -------- | -------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `queryRootField`   | string   | true     | The name of the query root field for this API.                                                                                                                          |
| `uniqueIdentifier` | [string] | true     | A set of fields which can uniquely identify a row/object in the model.                                                                                                  |
| `description`      | string   | false    | The description of the select unique graphql definition of the model. Gets added to the description of the select unique root field of the model in the graphql schema. |

### OrderableField

| Name                | Type                                        | Required | Description |
| ------------------- | ------------------------------------------- | -------- | ----------- |
| `fieldName`         | string                                      | true     |             |
| `orderByDirections` | [EnableAllOrSpecific](#enableallorspecific) | true     |             |

### FilterableField

| Name        | Type                                        | Required | Description |
| ----------- | ------------------------------------------- | -------- | ----------- |
| `fieldName` | string                                      | true     |             |
| `operators` | [EnableAllOrSpecific](#enableallorspecific) | true     |             |

### EnableAllOrSpecific

Must have exactly one of the following fields:

| Name             | Type     | Required | Description |
| ---------------- | -------- | -------- | ----------- |
| `enableAll`      | boolean  | false    |             |
| `enableSpecific` | [string] | false    |             |

### ModelSource

Description of how a model maps to a particular data connector

| Name                | Type                    | Required | Description                                                                            |
| ------------------- | ----------------------- | -------- | -------------------------------------------------------------------------------------- |
| `dataConnectorName` | string                  | true     | The name of the data connector backing this model.                                     |
| `collection`        | string                  | true     | The collection in the data connector that backs this model.                            |
| `typeMapping`       | [undefined](#undefined) | false    | How the various types used in this model correspond to entities in the data connector. |
| `argumentMapping`   | [undefined](#undefined) | false    |                                                                                        |

**Example**

```yaml
dataConnectorName: data_connector
collection: articles
typeMapping:
  article:
    fieldMapping:
      article_id:
        column: id
      title:
        column: title
      author_id:
        column: author_id
argumentMapping: {}
```

### undefined

| Name          | Type   | Required | Description |
| ------------- | ------ | -------- | ----------- |
| `<customKey>` | string | false    |             |

### undefined

How the various types used in this model correspond to entities in the data connector.

| Name          | Type                        | Required | Description |
| ------------- | --------------------------- | -------- | ----------- |
| `<customKey>` | [TypeMapping](#typemapping) | false    |             |

### TypeMapping

| Name           | Type                    | Required | Description |
| -------------- | ----------------------- | -------- | ----------- |
| `fieldMapping` | [undefined](#undefined) | true     |             |

### undefined

| Name          | Type                                      | Required | Description |
| ------------- | ----------------------------------------- | -------- | ----------- |
| `<customKey>` | [ObjectFieldMapping](#objectfieldmapping) | false    |             |

### ObjectFieldMapping

| Name     | Type   | Required | Description |
| -------- | ------ | -------- | ----------- |
| `column` | string | true     |             |

### ArgumentDefinition

The definition of an argument for a field, command, or model.

| Name          | Type   | Required | Description |
| ------------- | ------ | -------- | ----------- |
| `name`        | string | true     |             |
| `type`        | string | true     |             |
| `description` | string | false    |             |

### ObjectTypeV1

Definition of a user-defined Open DD object type.

| Name             | Type                                                                     | Required | Description                                                                                                                                                                                                                                                                                      |
| ---------------- | ------------------------------------------------------------------------ | -------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| `name`           | string                                                                   | true     | The name to give this object type, used to refer to it elsewhere in the metadata. Must be unique across all types defined in this subgraph.                                                                                                                                                      |
| `fields`         | [[ObjectFieldDefinition](#objectfielddefinition)]                        | true     | The list of fields defined for this object type.                                                                                                                                                                                                                                                 |
| `globalIdFields` | [string]                                                                 | false    | The subset of fields that uniquely identify this object in the domain. Setting this property will automatically implement the GraphQL Relay Node interface for this object type and add an `id` global ID field. If setting this property, there must not be a field named `id` already present. |
| `graphql`        | [ObjectTypeGraphQLConfiguration](#objecttypegraphqlconfiguration) / null | false    | Configuration for how this object type should appear in the GraphQL schema.                                                                                                                                                                                                                      |
| `description`    | string                                                                   | false    | The description of the object. Gets added to the description of the object's definition in the graphql schema.                                                                                                                                                                                   |

**Example**

```yaml
name: Author
fields:
  - name: author_id
    type: Int!
    description: The id of the author
  - name: first_name
    type: String
    description: The first name of the author
  - name: last_name
    type: String
    description: The last name of the author
globalIdFields:
  - author_id
graphql:
  typeName: Author
  inputTypeName: null
description: An author of a book
```

### ObjectTypeGraphQLConfiguration

GraphQL configuration of an Open DD object type.

| Name            | Type          | Required | Description                                                                                             |
| --------------- | ------------- | -------- | ------------------------------------------------------------------------------------------------------- |
| `typeName`      | string / null | false    | The name to use for the GraphQL type representation of this object type when used in an output context. |
| `inputTypeName` | string / null | false    | The name to use for the GraphQL type representation of this object type when used in an input context.  |

### ObjectFieldDefinition

The definition of a field in a user-defined object type.

| Name          | Type   | Required | Description                                                                                                                                                   |
| ------------- | ------ | -------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `name`        | string | true     | The name of the field. This name is used both when referring to the field elsewhere in the metadata and when creating the corresponding GraphQl type.         |
| `type`        | string | true     | The type of this field. This uses the GraphQL syntax to represent field types and must refer to one of the inbuilt OpenDd types or another user-defined type. |
| `description` | string | false    | The description of this field. Gets added to the description of the field's definition in the graphql schema.                                                 |

### ScalarTypeGraphQLConfiguration

GraphQL configuration of an Open DD scalar type

| Name       | Type   | Required | Description                                          |
| ---------- | ------ | -------- | ---------------------------------------------------- |
| `typeName` | string | true     | The name of the GraphQl type to use for this scalar. |

### ScalarTypeV1

Definition of a user-defined scalar type that that has opaque semantics.

| Name          | Type                                                                     | Required | Description                                                                                                                                 |
| ------------- | ------------------------------------------------------------------------ | -------- | ------------------------------------------------------------------------------------------------------------------------------------------- |
| `name`        | string                                                                   | true     | The name to give this scalar type, used to refer to it elsewhere in the metadata. Must be unique across all types defined in this subgraph. |
| `graphql`     | [ScalarTypeGraphQLConfiguration](#scalartypegraphqlconfiguration) / null | false    | Configuration for how this scalar type should appear in the GraphQL schema.                                                                 |
| `description` | string                                                                   | false    | The description of this scalar. Gets added to the description of the scalar's definition in the graphql schema.                             |

**Example**

```yaml
name: CustomString
graphql:
  typeName: CustomString
description: A custom string type
```

### RelationshipType

Type of the relationship.

string / string

### ModelRelationshipTarget

The target model for a relationship.

| Name               | Type                                  | Required | Description                                                         |
| ------------------ | ------------------------------------- | -------- | ------------------------------------------------------------------- |
| `name`             | string                                | true     | The name of the data model.                                         |
| `namespace`        | string                                | false    |                                                                     |
| `subgraph`         | string                                | false    | The subgraph of the target model. Defaults to the current subgraph. |
| `relationshipType` | [RelationshipType](#relationshiptype) | true     | Type of the relationship - object or array.                         |

### CommandRelationshipTarget

The target command for a relationship.

| Name       | Type   | Required | Description                                                           |
| ---------- | ------ | -------- | --------------------------------------------------------------------- |
| `name`     | string | true     | The name of the command.                                              |
| `subgraph` | string | false    | The subgraph of the target command. Defaults to the current subgraph. |

### RelationshipTarget

The target for a relationship.

Must have exactly one of the following fields:

| Name      | Type                                                    | Required | Description |
| --------- | ------------------------------------------------------- | -------- | ----------- |
| `model`   | [ModelRelationshipTarget](#modelrelationshiptarget)     | false    |             |
| `command` | [CommandRelationshipTarget](#commandrelationshiptarget) | false    |             |

### ValueExpression

An expression which evaluates to a value that can be used in permissions.

Must have exactly one of the following fields:

| Name              | Type   | Required | Description |
| ----------------- | ------ | -------- | ----------- |
| `literal`         |        | false    |             |
| `sessionVariable` | string | false    |             |

### RelationshipSourceFieldAccess

| Name        | Type   | Required | Description |
| ----------- | ------ | -------- | ----------- |
| `fieldName` | string | true     |             |

### RelationshipMappingSource

The source configuration for a relationship mapping.

Must have exactly one of the following fields:

| Name        | Type                                                              | Required | Description |
| ----------- | ----------------------------------------------------------------- | -------- | ----------- |
| `value`     | [ValueExpression](#valueexpression)                               | false    |             |
| `fieldPath` | [[RelationshipSourceFieldAccess](#relationshipsourcefieldaccess)] | false    |             |

### ArgumentMappingTarget

| Name           | Type   | Required | Description |
| -------------- | ------ | -------- | ----------- |
| `argumentName` | string | true     |             |

### RelationshipMappingTarget

The target configuration for a relationship mapping.

Must have exactly one of the following fields:

| Name         | Type                                                              | Required | Description |
| ------------ | ----------------------------------------------------------------- | -------- | ----------- |
| `argument`   | [ArgumentMappingTarget](#argumentmappingtarget)                   | false    |             |
| `modelField` | [[RelationshipSourceFieldAccess](#relationshipsourcefieldaccess)] | false    |             |

### RelationshipMapping

Definition of a how a particular field in the source maps to a target field or argument.

| Name     | Type                                                    | Required | Description                                             |
| -------- | ------------------------------------------------------- | -------- | ------------------------------------------------------- |
| `source` | [RelationshipMappingSource](#relationshipmappingsource) | true     | The source configuration for this relationship mapping. |
| `target` | [RelationshipMappingTarget](#relationshipmappingtarget) | true     | The target configuration for this relationship mapping. |

**Example**

```yaml
source:
  fieldPath:
    - fieldName: author_id
target:
  modelField:
    - fieldName: author_id
```

### RelationshipV1

Definition of a relationship on an OpenDD type which allows it to be extended with related models or commands.

| Name          | Type                                          | Required | Description                                                                                                   |
| ------------- | --------------------------------------------- | -------- | ------------------------------------------------------------------------------------------------------------- |
| `name`        | string                                        | true     | The name of the relationship.                                                                                 |
| `source`      | string                                        | true     | The source type of the relationship.                                                                          |
| `target`      | [RelationshipTarget](#relationshiptarget)     | true     | The target of the relationship.                                                                               |
| `mapping`     | [[RelationshipMapping](#relationshipmapping)] | true     | The mapping configuration of source to target for the relationship.                                           |
| `description` | string                                        | false    | The description of the relationship. Gets added to the description of the relationship in the graphql schema. |

**Example**

```yaml
name: Articles
source: author
target:
  model:
    name: Articles
    namespace: null
    subgraph: null
    relationshipType: Array
mapping:
  - source:
      fieldPath:
        - fieldName: author_id
    target:
      modelField:
        - fieldName: author_id
description: Articles written by an author
```

### FieldComparisonPredicate

Field comparision predicate filters objects based on a field value.

| Name       | Type                                | Required | Description                                                |
| ---------- | ----------------------------------- | -------- | ---------------------------------------------------------- |
| `field`    | string                              | true     | The field name of the object type of the model to compare. |
| `operator` | string                              | true     | The name of the operator to use for comparison.            |
| `value`    | [ValueExpression](#valueexpression) | true     | The value expression to compare against.                   |

### undefined

| Name    | Type   | Required | Description |
| ------- | ------ | -------- | ----------- |
| `field` | string | true     |             |

### RelationshipPredicate

Relationship predicate filters objects of a source model based on a predicate on the related model.

| Name        | Type                                     | Required | Description                                                                                                                                                   |
| ----------- | ---------------------------------------- | -------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `name`      | string                                   | true     | The name of the relationship of the object type of the model to follow.                                                                                       |
| `predicate` | [ModelPredicate](#modelpredicate) / null | false    | The predicate to apply on the related objects. If this is null, then the predicate evaluates to true as long as there is at least one related object present. |

### ModelPredicate

A predicate that can be used to restrict the objects returned when querying a model.

Must have exactly one of the following fields:

| Name              | Type                                                  | Required | Description |
| ----------------- | ----------------------------------------------------- | -------- | ----------- |
| `fieldComparison` | [FieldComparisonPredicate](#fieldcomparisonpredicate) | false    |             |
| `fieldIsNull`     | [undefined](#undefined)                               | false    |             |
| `relationship`    | [RelationshipPredicate](#relationshippredicate)       | false    |             |
| `and`             | [[ModelPredicate](#modelpredicate)]                   | false    |             |
| `or`              | [[ModelPredicate](#modelpredicate)]                   | false    |             |
| `not`             | [ModelPredicate](#modelpredicate)                     | false    |             |

### SelectPermission

Defines the permissions for selecting a model for a role.

| Name     | Type                                     | Required | Description                                                                                        |
| -------- | ---------------------------------------- | -------- | -------------------------------------------------------------------------------------------------- |
| `filter` | null / [ModelPredicate](#modelpredicate) | true     | Filter expression when selecting rows for this model. Null filter implies all rows are selectable. |

### ModelPermission

Defines the permissions for an OpenDD model.

| Name     | Type                                         | Required | Description                                                                                                               |
| -------- | -------------------------------------------- | -------- | ------------------------------------------------------------------------------------------------------------------------- |
| `role`   | string                                       | true     | The role for which permissions are being defined.                                                                         |
| `select` | [SelectPermission](#selectpermission) / null | false    | The permissions for selecting from this model for this role. If this is null, the role is not allowed to query the model. |

**Example**

```yaml
role: user
select:
  filter:
    fieldComparison:
      field: author_id
      operator: _eq
      value:
        sessionVariable: x-hasura-user-id
```

### ModelPermissionsV1

Definition of permissions for an OpenDD model.

| Name          | Type                                  | Required | Description                                                    |
| ------------- | ------------------------------------- | -------- | -------------------------------------------------------------- |
| `modelName`   | string                                | true     | The name of the model for which permissions are being defined. |
| `permissions` | [[ModelPermission](#modelpermission)] | true     | A list of model permissions, one for each role.                |

**Example**

```yaml
modelName: Articles
permissions:
  - role: admin
    select:
      filter: null
  - role: user
    select:
      filter:
        fieldComparison:
          field: author_id
          operator: _eq
          value:
            sessionVariable: x-hasura-user-id
```

### CommandPermission

Defines the permissions for a role for a command.

| Name             | Type    | Required | Description                                       |
| ---------------- | ------- | -------- | ------------------------------------------------- |
| `role`           | string  | true     | The role for which permissions are being defined. |
| `allowExecution` | boolean | true     | Whether the command is executable by the role.    |

**Example**

```yaml
role: user
allowExecution: true
```

### CommandPermissionsV1

Definition of permissions for an OpenDD command.

| Name          | Type                                      | Required | Description                                                      |
| ------------- | ----------------------------------------- | -------- | ---------------------------------------------------------------- |
| `commandName` | string                                    | true     | The name of the command for which permissions are being defined. |
| `permissions` | [[CommandPermission](#commandpermission)] | true     | A list of command permissions, one for each role.                |

**Example**

```yaml
commandName: get_article_by_id
permissions:
  - role: admin
    allowExecution: true
  - role: user
    allowExecution: true
```

### DataConnectorScalarRepresentationV1

The representation of a data connector scalar in terms of Open DD types

| Name                      | Type                                                                                       | Required | Description                                                                                 |
| ------------------------- | ------------------------------------------------------------------------------------------ | -------- | ------------------------------------------------------------------------------------------- |
| `dataConnectorName`       | string                                                                                     | true     | The name of the data connector that this scalar type comes from.                            |
| `dataConnectorScalarType` | string                                                                                     | true     | The name of the scalar type coming from the data connector.                                 |
| `representation`          | [TypeName](#typename)                                                                      | true     | The name of the Open DD type that this data connector scalar type should be represented as. |
| `graphql`                 | [DataConnectorScalarGraphQLConfiguration](#dataconnectorscalargraphqlconfiguration) / null | false    | Configuration for how this scalar's operators should appear in the GraphQL schema.          |

**Example**

```yaml
dataConnectorName: data_connector
dataConnectorScalarType: varchar
representation: String
graphql:
  comparisonExpressionTypeName: String_Comparison_Exp
```

### DataConnectorScalarGraphQLConfiguration

GraphQL configuration of a data connector scalar

| Name                           | Type          | Required | Description |
| ------------------------------ | ------------- | -------- | ----------- |
| `comparisonExpressionTypeName` | string / null | false    |             |

### TypeName

The name of the Open DD type that this data connector scalar type should be represented as.

string / string

### CommandPermissionsV1

Definition of permissions for an OpenDD command.

| Name          | Type                                      | Required | Description                                                      |
| ------------- | ----------------------------------------- | -------- | ---------------------------------------------------------------- |
| `commandName` | string                                    | true     | The name of the command for which permissions are being defined. |
| `permissions` | [[CommandPermission](#commandpermission)] | true     | A list of command permissions, one for each role.                |

**Example**

```yaml
commandName: get_article_by_id
permissions:
  - role: admin
    allowExecution: true
  - role: user
    allowExecution: true
```

### CommandPermission

Defines the permissions for a role for a command.

| Name             | Type    | Required | Description                                       |
| ---------------- | ------- | -------- | ------------------------------------------------- |
| `role`           | string  | true     | The role for which permissions are being defined. |
| `allowExecution` | boolean | true     | Whether the command is executable by the role.    |

**Example**

```yaml
role: user
allowExecution: true
```

### ModelPermissionsV1

Definition of permissions for an OpenDD model.

| Name          | Type                                  | Required | Description                                                    |
| ------------- | ------------------------------------- | -------- | -------------------------------------------------------------- |
| `modelName`   | string                                | true     | The name of the model for which permissions are being defined. |
| `permissions` | [[ModelPermission](#modelpermission)] | true     | A list of model permissions, one for each role.                |

**Example**

```yaml
modelName: Articles
permissions:
  - role: admin
    select:
      filter: null
  - role: user
    select:
      filter:
        fieldComparison:
          field: author_id
          operator: _eq
          value:
            sessionVariable: x-hasura-user-id
```

### ModelPermission

Defines the permissions for an OpenDD model.

| Name     | Type                                         | Required | Description                                                                                                               |
| -------- | -------------------------------------------- | -------- | ------------------------------------------------------------------------------------------------------------------------- |
| `role`   | string                                       | true     | The role for which permissions are being defined.                                                                         |
| `select` | [SelectPermission](#selectpermission) / null | false    | The permissions for selecting from this model for this role. If this is null, the role is not allowed to query the model. |

**Example**

```yaml
role: user
select:
  filter:
    fieldComparison:
      field: author_id
      operator: _eq
      value:
        sessionVariable: x-hasura-user-id
```

### SelectPermission

Defines the permissions for selecting a model for a role.

| Name     | Type                                     | Required | Description                                                                                        |
| -------- | ---------------------------------------- | -------- | -------------------------------------------------------------------------------------------------- |
| `filter` | null / [ModelPredicate](#modelpredicate) | true     | Filter expression when selecting rows for this model. Null filter implies all rows are selectable. |

### ModelPredicate

A predicate that can be used to restrict the objects returned when querying a model.

Must have exactly one of the following fields:

| Name              | Type                                                  | Required | Description |
| ----------------- | ----------------------------------------------------- | -------- | ----------- |
| `fieldComparison` | [FieldComparisonPredicate](#fieldcomparisonpredicate) | false    |             |
| `fieldIsNull`     | [undefined](#undefined)                               | false    |             |
| `relationship`    | [RelationshipPredicate](#relationshippredicate)       | false    |             |
| `and`             | [[ModelPredicate](#modelpredicate)]                   | false    |             |
| `or`              | [[ModelPredicate](#modelpredicate)]                   | false    |             |
| `not`             | [ModelPredicate](#modelpredicate)                     | false    |             |

### RelationshipPredicate

Relationship predicate filters objects of a source model based on a predicate on the related model.

| Name        | Type                                     | Required | Description                                                                                                                                                   |
| ----------- | ---------------------------------------- | -------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `name`      | string                                   | true     | The name of the relationship of the object type of the model to follow.                                                                                       |
| `predicate` | [ModelPredicate](#modelpredicate) / null | false    | The predicate to apply on the related objects. If this is null, then the predicate evaluates to true as long as there is at least one related object present. |

### undefined

| Name    | Type   | Required | Description |
| ------- | ------ | -------- | ----------- |
| `field` | string | true     |             |

### FieldComparisonPredicate

Field comparision predicate filters objects based on a field value.

| Name       | Type                                | Required | Description                                                |
| ---------- | ----------------------------------- | -------- | ---------------------------------------------------------- |
| `field`    | string                              | true     | The field name of the object type of the model to compare. |
| `operator` | string                              | true     | The name of the operator to use for comparison.            |
| `value`    | [ValueExpression](#valueexpression) | true     | The value expression to compare against.                   |

### RelationshipV1

Definition of a relationship on an OpenDD type which allows it to be extended with related models or commands.

| Name          | Type                                          | Required | Description                                                                                                   |
| ------------- | --------------------------------------------- | -------- | ------------------------------------------------------------------------------------------------------------- |
| `name`        | string                                        | true     | The name of the relationship.                                                                                 |
| `source`      | string                                        | true     | The source type of the relationship.                                                                          |
| `target`      | [RelationshipTarget](#relationshiptarget)     | true     | The target of the relationship.                                                                               |
| `mapping`     | [[RelationshipMapping](#relationshipmapping)] | true     | The mapping configuration of source to target for the relationship.                                           |
| `description` | string                                        | false    | The description of the relationship. Gets added to the description of the relationship in the graphql schema. |

**Example**

```yaml
name: Articles
source: author
target:
  model:
    name: Articles
    namespace: null
    subgraph: null
    relationshipType: Array
mapping:
  - source:
      fieldPath:
        - fieldName: author_id
    target:
      modelField:
        - fieldName: author_id
description: Articles written by an author
```

### RelationshipMapping

Definition of a how a particular field in the source maps to a target field or argument.

| Name     | Type                                                    | Required | Description                                             |
| -------- | ------------------------------------------------------- | -------- | ------------------------------------------------------- |
| `source` | [RelationshipMappingSource](#relationshipmappingsource) | true     | The source configuration for this relationship mapping. |
| `target` | [RelationshipMappingTarget](#relationshipmappingtarget) | true     | The target configuration for this relationship mapping. |

**Example**

```yaml
source:
  fieldPath:
    - fieldName: author_id
target:
  modelField:
    - fieldName: author_id
```

### RelationshipMappingTarget

The target configuration for a relationship mapping.

Must have exactly one of the following fields:

| Name         | Type                                                              | Required | Description |
| ------------ | ----------------------------------------------------------------- | -------- | ----------- |
| `argument`   | [ArgumentMappingTarget](#argumentmappingtarget)                   | false    |             |
| `modelField` | [[RelationshipSourceFieldAccess](#relationshipsourcefieldaccess)] | false    |             |

### ArgumentMappingTarget

| Name           | Type   | Required | Description |
| -------------- | ------ | -------- | ----------- |
| `argumentName` | string | true     |             |

### RelationshipMappingSource

The source configuration for a relationship mapping.

Must have exactly one of the following fields:

| Name        | Type                                                              | Required | Description |
| ----------- | ----------------------------------------------------------------- | -------- | ----------- |
| `value`     | [ValueExpression](#valueexpression)                               | false    |             |
| `fieldPath` | [[RelationshipSourceFieldAccess](#relationshipsourcefieldaccess)] | false    |             |

### RelationshipSourceFieldAccess

| Name        | Type   | Required | Description |
| ----------- | ------ | -------- | ----------- |
| `fieldName` | string | true     |             |

### ValueExpression

An expression which evaluates to a value that can be used in permissions.

Must have exactly one of the following fields:

| Name              | Type   | Required | Description |
| ----------------- | ------ | -------- | ----------- |
| `literal`         |        | false    |             |
| `sessionVariable` | string | false    |             |

### RelationshipTarget

The target for a relationship.

Must have exactly one of the following fields:

| Name      | Type                                                    | Required | Description |
| --------- | ------------------------------------------------------- | -------- | ----------- |
| `model`   | [ModelRelationshipTarget](#modelrelationshiptarget)     | false    |             |
| `command` | [CommandRelationshipTarget](#commandrelationshiptarget) | false    |             |

### CommandRelationshipTarget

The target command for a relationship.

| Name       | Type   | Required | Description                                                           |
| ---------- | ------ | -------- | --------------------------------------------------------------------- |
| `name`     | string | true     | The name of the command.                                              |
| `subgraph` | string | false    | The subgraph of the target command. Defaults to the current subgraph. |

### ModelRelationshipTarget

The target model for a relationship.

| Name               | Type                                  | Required | Description                                                         |
| ------------------ | ------------------------------------- | -------- | ------------------------------------------------------------------- |
| `name`             | string                                | true     | The name of the data model.                                         |
| `namespace`        | string                                | false    |                                                                     |
| `subgraph`         | string                                | false    | The subgraph of the target model. Defaults to the current subgraph. |
| `relationshipType` | [RelationshipType](#relationshiptype) | true     | Type of the relationship - object or array.                         |

### RelationshipType

Type of the relationship.

string / string

### ScalarTypeV1

Definition of a user-defined scalar type that that has opaque semantics.

| Name          | Type                                                                     | Required | Description                                                                                                                                 |
| ------------- | ------------------------------------------------------------------------ | -------- | ------------------------------------------------------------------------------------------------------------------------------------------- |
| `name`        | string                                                                   | true     | The name to give this scalar type, used to refer to it elsewhere in the metadata. Must be unique across all types defined in this subgraph. |
| `graphql`     | [ScalarTypeGraphQLConfiguration](#scalartypegraphqlconfiguration) / null | false    | Configuration for how this scalar type should appear in the GraphQL schema.                                                                 |
| `description` | string                                                                   | false    | The description of this scalar. Gets added to the description of the scalar's definition in the graphql schema.                             |

**Example**

```yaml
name: CustomString
graphql:
  typeName: CustomString
description: A custom string type
```

### ScalarTypeGraphQLConfiguration

GraphQL configuration of an Open DD scalar type

| Name       | Type   | Required | Description                                          |
| ---------- | ------ | -------- | ---------------------------------------------------- |
| `typeName` | string | true     | The name of the GraphQl type to use for this scalar. |

### ObjectFieldDefinition

The definition of a field in a user-defined object type.

| Name          | Type   | Required | Description                                                                                                                                                   |
| ------------- | ------ | -------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `name`        | string | true     | The name of the field. This name is used both when referring to the field elsewhere in the metadata and when creating the corresponding GraphQl type.         |
| `type`        | string | true     | The type of this field. This uses the GraphQL syntax to represent field types and must refer to one of the inbuilt OpenDd types or another user-defined type. |
| `description` | string | false    | The description of this field. Gets added to the description of the field's definition in the graphql schema.                                                 |

### ObjectTypeGraphQLConfiguration

GraphQL configuration of an Open DD object type.

| Name            | Type          | Required | Description                                                                                             |
| --------------- | ------------- | -------- | ------------------------------------------------------------------------------------------------------- |
| `typeName`      | string / null | false    | The name to use for the GraphQL type representation of this object type when used in an output context. |
| `inputTypeName` | string / null | false    | The name to use for the GraphQL type representation of this object type when used in an input context.  |

### ObjectTypeV1

Definition of a user-defined Open DD object type.

| Name             | Type                                                                     | Required | Description                                                                                                                                                                                                                                                                                      |
| ---------------- | ------------------------------------------------------------------------ | -------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| `name`           | string                                                                   | true     | The name to give this object type, used to refer to it elsewhere in the metadata. Must be unique across all types defined in this subgraph.                                                                                                                                                      |
| `fields`         | [[ObjectFieldDefinition](#objectfielddefinition)]                        | true     | The list of fields defined for this object type.                                                                                                                                                                                                                                                 |
| `globalIdFields` | [string]                                                                 | false    | The subset of fields that uniquely identify this object in the domain. Setting this property will automatically implement the GraphQL Relay Node interface for this object type and add an `id` global ID field. If setting this property, there must not be a field named `id` already present. |
| `graphql`        | [ObjectTypeGraphQLConfiguration](#objecttypegraphqlconfiguration) / null | false    | Configuration for how this object type should appear in the GraphQL schema.                                                                                                                                                                                                                      |
| `description`    | string                                                                   | false    | The description of the object. Gets added to the description of the object's definition in the graphql schema.                                                                                                                                                                                   |

**Example**

```yaml
name: Author
fields:
  - name: author_id
    type: Int!
    description: The id of the author
  - name: first_name
    type: String
    description: The first name of the author
  - name: last_name
    type: String
    description: The last name of the author
globalIdFields:
  - author_id
graphql:
  typeName: Author
  inputTypeName: null
description: An author of a book
```

### ArgumentDefinition

The definition of an argument for a field, command, or model.

| Name          | Type   | Required | Description |
| ------------- | ------ | -------- | ----------- |
| `name`        | string | true     |             |
| `type`        | string | true     |             |
| `description` | string | false    |             |

### ObjectFieldMapping

| Name     | Type   | Required | Description |
| -------- | ------ | -------- | ----------- |
| `column` | string | true     |             |

### undefined

| Name          | Type                                      | Required | Description |
| ------------- | ----------------------------------------- | -------- | ----------- |
| `<customKey>` | [ObjectFieldMapping](#objectfieldmapping) | false    |             |

### TypeMapping

| Name           | Type                    | Required | Description |
| -------------- | ----------------------- | -------- | ----------- |
| `fieldMapping` | [undefined](#undefined) | true     |             |

### undefined

How the various types used in this model correspond to entities in the data connector.

| Name          | Type                        | Required | Description |
| ------------- | --------------------------- | -------- | ----------- |
| `<customKey>` | [TypeMapping](#typemapping) | false    |             |

### undefined

| Name          | Type   | Required | Description |
| ------------- | ------ | -------- | ----------- |
| `<customKey>` | string | false    |             |

### ModelSource

Description of how a model maps to a particular data connector

| Name                | Type                    | Required | Description                                                                            |
| ------------------- | ----------------------- | -------- | -------------------------------------------------------------------------------------- |
| `dataConnectorName` | string                  | true     | The name of the data connector backing this model.                                     |
| `collection`        | string                  | true     | The collection in the data connector that backs this model.                            |
| `typeMapping`       | [undefined](#undefined) | false    | How the various types used in this model correspond to entities in the data connector. |
| `argumentMapping`   | [undefined](#undefined) | false    |                                                                                        |

**Example**

```yaml
dataConnectorName: data_connector
collection: articles
typeMapping:
  article:
    fieldMapping:
      article_id:
        column: id
      title:
        column: title
      author_id:
        column: author_id
argumentMapping: {}
```

### EnableAllOrSpecific

Must have exactly one of the following fields:

| Name             | Type     | Required | Description |
| ---------------- | -------- | -------- | ----------- |
| `enableAll`      | boolean  | false    |             |
| `enableSpecific` | [string] | false    |             |

### FilterableField

| Name        | Type                                        | Required | Description |
| ----------- | ------------------------------------------- | -------- | ----------- |
| `fieldName` | string                                      | true     |             |
| `operators` | [EnableAllOrSpecific](#enableallorspecific) | true     |             |

### OrderableField

| Name                | Type                                        | Required | Description |
| ------------------- | ------------------------------------------- | -------- | ----------- |
| `fieldName`         | string                                      | true     |             |
| `orderByDirections` | [EnableAllOrSpecific](#enableallorspecific) | true     |             |

### SelectUniqueGraphQlDefinition

The definition of the GraphQL API for selecting a unique row/object from a model.

| Name               | Type     | Required | Description                                                                                                                                                             |
| ------------------ | -------- | -------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `queryRootField`   | string   | true     | The name of the query root field for this API.                                                                                                                          |
| `uniqueIdentifier` | [string] | true     | A set of fields which can uniquely identify a row/object in the model.                                                                                                  |
| `description`      | string   | false    | The description of the select unique graphql definition of the model. Gets added to the description of the select unique root field of the model in the graphql schema. |

### SelectManyGraphQlDefinition

The definition of the GraphQL API for selecting rows from a model.

| Name             | Type   | Required | Description                                                                                                                                                         |
| ---------------- | ------ | -------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `queryRootField` | string | true     | The name of the query root field for this API.                                                                                                                      |
| `description`    | string | false    | The description of the select many graphql definition of the model. Gets added to the description of the select many root field of the model in the graphql schema. |

### ModelGraphQlDefinition

The definition of how a model appears in the GraphQL API.

| Name                    | Type                                                               | Required | Description                                                                                                                                    |
| ----------------------- | ------------------------------------------------------------------ | -------- | ---------------------------------------------------------------------------------------------------------------------------------------------- |
| `selectUniques`         | [[SelectUniqueGraphQlDefinition](#selectuniquegraphqldefinition)]  | true     | For each select unique defined here, a query root field is added to the GraphQL API that can be used to select a unique object from the model. |
| `selectMany`            | [SelectManyGraphQlDefinition](#selectmanygraphqldefinition) / null | false    | Select many configuration for a model adds a query root field to the GraphQl API that can be used to retrieve multiple objects from the model. |
| `argumentsInputType`    | string / null                                                      | false    | The type name of the input type used to hold the arguments of the model.                                                                       |
| `filterExpressionType`  | string / null                                                      | false    | The type name of the filter boolean expression input type.                                                                                     |
| `orderByExpressionType` | string / null                                                      | false    | The type name of the order by expression input type.                                                                                           |

**Example**

```yaml
selectUniques:
  - queryRootField: ArticleByID
    uniqueIdentifier:
      - article_id
    description: Description for the select unique ArticleByID
selectMany:
  queryRootField: ArticleMany
  description: Description for the select many ArticleMany
argumentsInputType: null
filterExpressionType: Article_Where_Exp
orderByExpressionType: Article_Order_By
```

### ModelV1

The definition of a data model. A data model is a collection of objects of a particular type. Models can support one or
more CRUD operations.

| Name               | Type                                                     | Required | Description                                                                                     |
| ------------------ | -------------------------------------------------------- | -------- | ----------------------------------------------------------------------------------------------- |
| `name`             | string                                                   | true     | The name of the data model.                                                                     |
| `objectType`       | string                                                   | true     | The type of the objects of which this model is a collection.                                    |
| `globalIdSource`   | boolean                                                  | false    | Whether this model should be used as the global ID source for all objects of its type.          |
| `arguments`        | [[ArgumentDefinition](#argumentdefinition)]              | false    | A list of arguments accepted by this model. Defaults to no arguments.                           |
| `source`           | [ModelSource](#modelsource) / null                       | false    | The source configuration for this model.                                                        |
| `filterableFields` | [[FilterableField](#filterablefield)]                    | true     | A list of fields that can be used to filter the objects in this model.                          |
| `orderableFields`  | [[OrderableField](#orderablefield)]                      | true     | A list of fields that can be used to order the objects in this model.                           |
| `graphql`          | [ModelGraphQlDefinition](#modelgraphqldefinition) / null | false    | Configuration for how this model should appear in the GraphQL schema.                           |
| `description`      | string                                                   | false    | The description of the model. Gets added to the description of the model in the graphql schema. |

**Example**

```yaml
name: Articles
objectType: article
globalIdSource: true
arguments: []
source:
  dataConnectorName: data_connector
  collection: articles
  typeMapping:
    article:
      fieldMapping:
        article_id:
          column: id
        title:
          column: title
        author_id:
          column: author_id
  argumentMapping: {}
filterableFields:
  - fieldName: article_id
    operators:
      enableAll: true
  - fieldName: title
    operators:
      enableAll: true
  - fieldName: author_id
    operators:
      enableAll: true
orderableFields:
  - fieldName: article_id
    orderByDirections:
      enableAll: true
  - fieldName: title
    orderByDirections:
      enableAll: true
  - fieldName: author_id
    orderByDirections:
      enableAll: true
graphql:
  selectUniques:
    - queryRootField: ArticleByID
      uniqueIdentifier:
        - article_id
      description: Description for the select unique ArticleByID
  selectMany:
    queryRootField: ArticleMany
    description: Description for the select many ArticleMany
  argumentsInputType: null
  filterExpressionType: Article_Where_Exp
  orderByExpressionType: Article_Order_By
description: Description for the model Articles
```

### DataConnectorCommand

The function/procedure in the data connector that backs this command.

Must have exactly one of the following fields:

| Name        | Type   | Required | Description |
| ----------- | ------ | -------- | ----------- |
| `function`  | string | false    |             |
| `procedure` | string | false    |             |

### undefined

How the various types used in this command correspond to entities in the data connector.

| Name          | Type                        | Required | Description |
| ------------- | --------------------------- | -------- | ----------- |
| `<customKey>` | [TypeMapping](#typemapping) | false    |             |

### undefined

Mapping from command argument names to data connector table argument names.

| Name          | Type   | Required | Description |
| ------------- | ------ | -------- | ----------- |
| `<customKey>` | string | false    |             |

### CommandSource

Description of how a command maps to a particular data connector

| Name                   | Type                                          | Required | Description                                                                              |
| ---------------------- | --------------------------------------------- | -------- | ---------------------------------------------------------------------------------------- |
| `dataConnectorName`    | string                                        | true     | The name of the data connector backing this command.                                     |
| `dataConnectorCommand` | [DataConnectorCommand](#dataconnectorcommand) | true     | The function/procedure in the data connector that backs this command.                    |
| `typeMapping`          | [undefined](#undefined)                       | false    | How the various types used in this command correspond to entities in the data connector. |
| `argumentMapping`      | [undefined](#undefined)                       | false    | Mapping from command argument names to data connector table argument names.              |

**Example**

```yaml
dataConnectorName: data_connector
dataConnectorCommand:
  function: latest_article
typeMapping: {}
argumentMapping: {}
```

### CommandGraphQlDefinition

The definition of how a command should appear in the GraphQL API.

| Name            | Type   | Required | Description                                                                   |
| --------------- | ------ | -------- | ----------------------------------------------------------------------------- |
| `rootFieldName` | string | true     | The name of the graphql root field to use for this command.                   |
| `rootFieldKind` | string | true     | Whether to put this command in the Query or Mutation root of the GraphQL API. |

**Example**

```yaml
rootFieldName: getLatestArticle
rootFieldKind: Query
```

### CommandV1

Definition of an OpenDD Command, which is a custom operation that can take arguments and returns an output. The
semantics of a command are opaque to OpenDD.

| Name          | Type                                                         | Required | Description                                                                                                      |
| ------------- | ------------------------------------------------------------ | -------- | ---------------------------------------------------------------------------------------------------------------- |
| `name`        | string                                                       | true     | The name of the command.                                                                                         |
| `outputType`  | string                                                       | true     | The return type of the command.                                                                                  |
| `arguments`   | [[ArgumentDefinition](#argumentdefinition)]                  | false    | The list of arguments accepted by this command. Defaults to no arguments.                                        |
| `source`      | [CommandSource](#commandsource) / null                       | false    | The source configuration for this command.                                                                       |
| `graphql`     | [CommandGraphQlDefinition](#commandgraphqldefinition) / null | false    | Configuration for how this command should appear in the GraphQL schema.                                          |
| `description` | string                                                       | false    | The description of the command. Gets added to the description of the command's root field in the graphql schema. |

**Example**

```yaml
name: get_latest_article
outputType: commandArticle
arguments: []
source:
  dataConnectorName: data_connector
  dataConnectorCommand:
    function: latest_article
  typeMapping:
    commandArticle:
      fieldMapping:
        article_id:
          column: id
  argumentMapping: {}
graphql:
  rootFieldName: getLatestArticle
  rootFieldKind: Query
description: Get the latest article
```

### TypeOutputPermission

Permissions for a type for a particular role when used in an output context.

| Name            | Type     | Required | Description                                       |
| --------------- | -------- | -------- | ------------------------------------------------- |
| `allowedFields` | [string] | true     | Fields of the type that are accessible for a role |

### TypePermission

Defines permissions for a particular role for a type.

| Name     | Type                                                 | Required | Description                                                                                                                                   |
| -------- | ---------------------------------------------------- | -------- | --------------------------------------------------------------------------------------------------------------------------------------------- |
| `role`   | string                                               | true     | The role for which permissions are being defined.                                                                                             |
| `output` | [TypeOutputPermission](#typeoutputpermission) / null | false    | Permissions for this role when this type is used in an output context. If null, this type is inaccessible for this role in an output context. |

**Example**

```yaml
role: user
output:
  allowedFields:
    - article_id
    - author_id
```

### TypePermissionsV1

Definition of permissions for an OpenDD type.

| Name          | Type                                | Required | Description                                                                           |
| ------------- | ----------------------------------- | -------- | ------------------------------------------------------------------------------------- |
| `typeName`    | string                              | true     | The name of the type for which permissions are being defined. Must be an object type. |
| `permissions` | [[TypePermission](#typepermission)] | true     | A list of type permissions, one for each role.                                        |

**Example**

```yaml
typeName: article
permissions:
  - role: admin
    output:
      allowedFields:
        - article_id
        - author_id
        - title
  - role: user
    output:
      allowedFields:
        - article_id
        - author_id
```

### EnvironmentValue

Either a literal string or a reference to a Hasura secret

Must have exactly one of the following fields:

| Name           | Type   | Required | Description |
| -------------- | ------ | -------- | ----------- |
| `value`        | string | false    |             |
| `valueFromEnv` | string | false    |             |

### ReadWriteUrls

| Name    | Type                                  | Required | Description |
| ------- | ------------------------------------- | -------- | ----------- |
| `read`  | [EnvironmentValue](#environmentvalue) | true     |             |
| `write` | [EnvironmentValue](#environmentvalue) | true     |             |

### DataConnectorUrlV1

The url(s) to access the data connector.

Must have exactly one of the following fields:

| Name            | Type                                  | Required | Description |
| --------------- | ------------------------------------- | -------- | ----------- |
| `singleUrl`     | [EnvironmentValue](#environmentvalue) | false    |             |
| `readWriteUrls` | [ReadWriteUrls](#readwriteurls)       | false    |             |

### undefined

Key value map of HTTP headers to be sent with each request to the data connector.

| Name          | Type                                  | Required | Description |
| ------------- | ------------------------------------- | -------- | ----------- |
| `<customKey>` | [EnvironmentValue](#environmentvalue) | false    |             |

### undefined

A named type

| Name   | Type   | Required | Description                                             |
| ------ | ------ | -------- | ------------------------------------------------------- |
| `type` | string | true     |                                                         |
| `name` | string | true     | The name can refer to a primitive type or a scalar type |

### undefined

A nullable type

| Name              | Type          | Required | Description                                       |
| ----------------- | ------------- | -------- | ------------------------------------------------- |
| `type`            | string        | true     |                                                   |
| `underlying_type` | [Type](#type) | true     | The type of the non-null inhabitants of this type |

### undefined

An array type

| Name           | Type          | Required | Description                           |
| -------------- | ------------- | -------- | ------------------------------------- |
| `type`         | string        | true     |                                       |
| `element_type` | [Type](#type) | true     | The type of the elements of the array |

### Type

Types track the valid representations of values as JSON

[undefined](#undefined) / [undefined](#undefined) / [undefined](#undefined)

### Aggregate Function Definition

The definition of an aggregation function on a scalar type

| Name          | Type          | Required | Description                                              |
| ------------- | ------------- | -------- | -------------------------------------------------------- |
| `result_type` | [Type](#type) | true     | The scalar or object type of the result of this function |

### undefined

A map from aggregate function names to their definitions. Result type names must be defined scalar types declared in
ScalarTypesCapabilities.

| Name          | Type                                                            | Required | Description |
| ------------- | --------------------------------------------------------------- | -------- | ----------- |
| `<customKey>` | [Aggregate Function Definition](#aggregate-function definition) | false    |             |

### Comparison Operator Definition

The definition of a comparison operator on a scalar type

| Name            | Type          | Required | Description                               |
| --------------- | ------------- | -------- | ----------------------------------------- |
| `argument_type` | [Type](#type) | true     | The type of the argument to this operator |

### undefined

A map from comparison operator names to their definitions. Argument type names must be defined scalar types declared in
ScalarTypesCapabilities.

| Name          | Type                                                              | Required | Description |
| ------------- | ----------------------------------------------------------------- | -------- | ----------- |
| `<customKey>` | [Comparison Operator Definition](#comparison-operator definition) | false    |             |

### Scalar Type

The definition of a scalar type, i.e. types that can be used as the types of columns.

| Name                   | Type                    | Required | Description                                                                                                                                      |
| ---------------------- | ----------------------- | -------- | ------------------------------------------------------------------------------------------------------------------------------------------------ |
| `aggregate_functions`  | [undefined](#undefined) | true     | A map from aggregate function names to their definitions. Result type names must be defined scalar types declared in ScalarTypesCapabilities.    |
| `comparison_operators` | [undefined](#undefined) | true     | A map from comparison operator names to their definitions. Argument type names must be defined scalar types declared in ScalarTypesCapabilities. |

### undefined

A list of scalar types which will be used as the types of collection columns

| Name          | Type                        | Required | Description |
| ------------- | --------------------------- | -------- | ----------- |
| `<customKey>` | [Scalar Type](#scalar-type) | false    |             |

### Object Field

The definition of an object field

| Name          | Type          | Required | Description               |
| ------------- | ------------- | -------- | ------------------------- |
| `description` | string        | false    | Description of this field |
| `type`        | [Type](#type) | true     | The type of this field    |

### undefined

Fields defined on this object type

| Name          | Type                          | Required | Description |
| ------------- | ----------------------------- | -------- | ----------- |
| `<customKey>` | [Object Field](#object-field) | false    |             |

### Object Type

The definition of an object type

| Name          | Type                    | Required | Description                        |
| ------------- | ----------------------- | -------- | ---------------------------------- |
| `description` | string                  | false    | Description of this type           |
| `fields`      | [undefined](#undefined) | true     | Fields defined on this object type |

### undefined

A list of object types which can be used as the types of arguments, or return types of procedures. Names should not
overlap with scalar type names.

| Name          | Type                        | Required | Description |
| ------------- | --------------------------- | -------- | ----------- |
| `<customKey>` | [Object Type](#object-type) | false    |             |

### Argument Info

| Name          | Type          | Required | Description                           |
| ------------- | ------------- | -------- | ------------------------------------- |
| `description` | string        | false    | Argument description                  |
| `type`        | [Type](#type) | true     | The name of the type of this argument |

### undefined

Any arguments that this collection requires

| Name          | Type                            | Required | Description |
| ------------- | ------------------------------- | -------- | ----------- |
| `<customKey>` | [Argument Info](#argument-info) | false    |             |

### Uniqueness Constraint

| Name             | Type     | Required | Description                                                   |
| ---------------- | -------- | -------- | ------------------------------------------------------------- |
| `unique_columns` | [string] | true     | A list of columns which this constraint requires to be unique |

### undefined

Any uniqueness constraints enforced on this collection

| Name          | Type                                            | Required | Description |
| ------------- | ----------------------------------------------- | -------- | ----------- |
| `<customKey>` | [Uniqueness Constraint](#uniqueness-constraint) | false    |             |

### undefined

The columns on which you want want to define the foreign key.

| Name          | Type   | Required | Description |
| ------------- | ------ | -------- | ----------- |
| `<customKey>` | string | false    |             |

### Foreign Key Constraint

| Name                 | Type                    | Required | Description                                                   |
| -------------------- | ----------------------- | -------- | ------------------------------------------------------------- |
| `column_mapping`     | [undefined](#undefined) | true     | The columns on which you want want to define the foreign key. |
| `foreign_collection` | string                  | true     | The name of a collection                                      |

### undefined

Any foreign key constraints enforced on this collection

| Name          | Type                                              | Required | Description |
| ------------- | ------------------------------------------------- | -------- | ----------- |
| `<customKey>` | [Foreign Key Constraint](#foreign-key constraint) | false    |             |

### Collection Info

| Name   | Type   | Required | Description                |
| ------ | ------ | -------- | -------------------------- |
| `name` | string | true     | The name of the collection |

Note: these names are abstract - there is no requirement that this name correspond to the name of an actual collection
in the database. | | `description` | string | false | Description of the collection | | `arguments` |
[undefined](#undefined) | true | Any arguments that this collection requires | | `type` | string | true | The name of
the collection's object type | | `uniqueness_constraints` | [undefined](#undefined) | true | Any uniqueness constraints
enforced on this collection | | `foreign_keys` | [undefined](#undefined) | true | Any foreign key constraints enforced
on this collection |

### undefined

Any arguments that this collection requires

| Name          | Type                            | Required | Description |
| ------------- | ------------------------------- | -------- | ----------- |
| `<customKey>` | [Argument Info](#argument-info) | false    |             |

### Function Info

| Name          | Type                    | Required | Description                                 |
| ------------- | ----------------------- | -------- | ------------------------------------------- |
| `name`        | string                  | true     | The name of the function                    |
| `description` | string                  | false    | Description of the function                 |
| `arguments`   | [undefined](#undefined) | true     | Any arguments that this collection requires |
| `result_type` | [Type](#type)           | true     | The name of the function's result type      |

### undefined

Any arguments that this collection requires

| Name          | Type                            | Required | Description |
| ------------- | ------------------------------- | -------- | ----------- |
| `<customKey>` | [Argument Info](#argument-info) | false    |             |

### Procedure Info

| Name          | Type                    | Required | Description                                 |
| ------------- | ----------------------- | -------- | ------------------------------------------- |
| `name`        | string                  | true     | The name of the procedure                   |
| `description` | string                  | false    | Column description                          |
| `arguments`   | [undefined](#undefined) | true     | Any arguments that this collection requires |
| `result_type` | [Type](#type)           | true     | The name of the result type                 |

### Schema Response

| Name           | Type                                  | Required | Description                                                                                                                                         |
| -------------- | ------------------------------------- | -------- | --------------------------------------------------------------------------------------------------------------------------------------------------- |
| `scalar_types` | [undefined](#undefined)               | true     | A list of scalar types which will be used as the types of collection columns                                                                        |
| `object_types` | [undefined](#undefined)               | true     | A list of object types which can be used as the types of arguments, or return types of procedures. Names should not overlap with scalar type names. |
| `collections`  | [[Collection Info](#collection-info)] | true     | Collections which are available for queries                                                                                                         |
| `functions`    | [[Function Info](#function-info)]     | true     | Functions (i.e. collections which return a single column and row)                                                                                   |
| `procedures`   | [[Procedure Info](#procedure-info)]   | true     | Procedures which are available for execution as part of mutations                                                                                   |

### LeafCapability

A unit value to indicate a particular leaf capability is supported. This is an empty struct to allow for future
sub-capabilities.

| Name | Type | Required | Description |
| ---- | ---- | -------- | ----------- |

### Query Capabilities

| Name         | Type                                     | Required | Description                                            |
| ------------ | ---------------------------------------- | -------- | ------------------------------------------------------ |
| `aggregates` | [LeafCapability](#leafcapability) / null | false    | Does the connector support aggregate queries           |
| `variables`  | [LeafCapability](#leafcapability) / null | false    | Does the connector support queries which use variables |

### Relationship Capabilities

| Name                   | Type                                     | Required | Description                                                                          |
| ---------------------- | ---------------------------------------- | -------- | ------------------------------------------------------------------------------------ |
| `relation_comparisons` | [LeafCapability](#leafcapability) / null | false    | Does the connector support comparisons that involve related collections (ie. joins)? |
| `order_by_aggregate`   | [LeafCapability](#leafcapability) / null | false    | Does the connector support ordering by an aggregated array relationship?             |

### Capabilities

Describes the features of the specification which a data connector implements.

| Name            | Type                                                           | Required | Description |
| --------------- | -------------------------------------------------------------- | -------- | ----------- |
| `query`         | [Query Capabilities](#query-capabilities)                      | true     |             |
| `explain`       | [LeafCapability](#leafcapability) / null                       | false    |             |
| `relationships` | [Relationship Capabilities](#relationship-capabilities) / null | false    |             |

### Capabilities Response

| Name           | Type                          | Required | Description |
| -------------- | ----------------------------- | -------- | ----------- |
| `versions`     | string                        | true     |             |
| `capabilities` | [Capabilities](#capabilities) | true     |             |

### SchemaAndCapabilitiesV01

| Name           | Type                                            | Required | Description |
| -------------- | ----------------------------------------------- | -------- | ----------- |
| `version`      | string                                          | true     |             |
| `schema`       | [Schema Response](#schema-response)             | true     |             |
| `capabilities` | [Capabilities Response](#capabilities-response) | true     |             |

### VersionedSchemaAndCapabilities

The schema of the data connector. This schema is used as the source of truth when serving requests and the live schema
of the data connector is not looked up.

[SchemaAndCapabilitiesV01](#schemaandcapabilitiesv01)

### DataConnectorLinkV1

Definition of a data connector - version 1.

| Name      | Type                                                              | Required | Description                                                                                                                                                    |
| --------- | ----------------------------------------------------------------- | -------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `name`    | string                                                            | true     | The name of the data connector.                                                                                                                                |
| `url`     | [DataConnectorUrlV1](#dataconnectorurlv1)                         | true     | The url(s) to access the data connector.                                                                                                                       |
| `headers` | [undefined](#undefined)                                           | false    | Key value map of HTTP headers to be sent with each request to the data connector.                                                                              |
| `schema`  | [VersionedSchemaAndCapabilities](#versionedschemaandcapabilities) | true     | The schema of the data connector. This schema is used as the source of truth when serving requests and the live schema of the data connector is not looked up. |

**Example**

```yaml
name: data_connector
url:
  singleUrl:
    value: http://data_connector:8100
headers: {}
schema:
  version: v0.1
  schema:
    scalar_types: {}
    object_types: {}
    collections: []
    functions: []
    procedures: []
  capabilities:
    versions: '*'
    capabilities:
      query:
        variables: {}
```
