---
sidebar_position: 4
sidebar_label: "Relationships connect data"
description: "Relationships allow you to connect data across different models."
keywords:
  - relationship
  - data modeling
---

import Tabs from "@theme/Tabs";
import TabItem from "@theme/TabItem";
import Thumbnail from "@site/src/components/Thumbnail";

# Relationships Connect Data

## Introduction

Relationships allow you to connect data, enabling you to query data across multiple entities.

## Lifecycle

:::info New to Hasura DDN?

If you haven't already, have a run through our [Quickstart](/getting-started/quickstart.mdx) guide to set up your Hasura
DDN instance. In the sections below, we'll guide you through how to interact with your metadata and shape your API to
your liking!

:::

### Creating a relationship

To query data across multiple entities, you'll first need to create a relationship between them.

<Tabs groupId="source-preference" className="api-tabs">
  <TabItem value="PostgreSQL" label="PostgreSQL"></TabItem>
  <TabItem value="MongoDB" label="MongoDB">

As an example you can configure a relationship between a "posts" collection and a "users" collection. This assumes that
both collections already have tracked models in your subgraph metadata, and that the `Post` model has a field called
`userId` that matches values in the `id` field of `User`.

Configure a relationship in your subgraph's metadata.

```sh title="Create a new directory to store metadata for relationships:"
mkdir -p <my_subgraph>/metadata/relationships/
```

```yaml title="Create a new metadata file:"
# relationships/post_user.hml
kind: Relationship
version: v1
definition:
  name: user
  source: Post
  target:
    model:
      name: User
      relationshipType: Object
  mapping:
    - source:
        fieldPath:
          - fieldName: userId
      target:
        modelField:
          - fieldName: id
```

  </TabItem>
  <TabItem value="ClickHouse" label="ClickHouse"></TabItem>
</Tabs>

### Updating a relationship

Your underlying data source may change over time. You can update your relationship to reflect these changes.

<Tabs groupId="source-preference" className="api-tabs">
  <TabItem value="PostgreSQL" label="PostgreSQL"></TabItem>
  <TabItem value="MongoDB" label="MongoDB">

As an example imagine you have a post-user relationship, and there was a field name on posts called `userId`, but that
name has changed to `authorId`.

First update your connector configuration and models to reflect the changed field name.

```bash title="Update your DataConnectorLink:"
ddn connector-link update <connector_name> --subgraph <path_to_subgraph.yaml>
```

```bash title="Then, update your model:"
ddn model update <connector_name> users
```

Then edit the relationship configuration in subgraph metadata.

```yaml title="Edit the existing metadata file:"
# relationships/post_user.hml
kind: Relationship
version: v1
definition:
  name: user
  source: Post
  target:
    model:
      name: User
      relationshipType: Object
  mapping:
    - source:
        fieldPath:
          - fieldName: authorId  # this is the line that has changed
      target:
        modelField:
          - fieldName: id
```

  </TabItem>
  <TabItem value="ClickHouse" label="ClickHouse"></TabItem>
</Tabs>

### Deleting a relationship

If you no longer need a relationship, you can delete it.

<Tabs groupId="source-preference" className="api-tabs">
  <TabItem value="PostgreSQL" label="PostgreSQL"></TabItem>
  <TabItem value="MongoDB" label="MongoDB">

Delete the relationship configuration from subgraph metadata.

```sh title="Delete relationship configuration:"
rm <my_subgraph>/metadata/relationships/post_user.hml
```

  </TabItem>
  <TabItem value="ClickHouse" label="ClickHouse"></TabItem>
</Tabs>

## Reference

You can learn more about relationships in the metadata reference [docs](/supergraph-modeling/relationships.mdx).
