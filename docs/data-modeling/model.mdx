---
sidebar_position: 2
sidebar_label: "Models read data"
description: "Models allow you to define the structure of your data and how it can be queried."
keywords:
  - model
  - data modeling
toc_max_heading_level: 4
---

import Tabs from "@theme/Tabs";
import TabItem from "@theme/TabItem";
import Thumbnail from "@site/src/components/Thumbnail";
import ModelCreatePostgreSQL from "@site/docs/data-modeling/_partials/_classic-connectors/_postgreSQL/_model-create.mdx";
import ModelCreateMongoDB from "@site/docs/data-modeling/_partials/_classic-connectors/_mongoDB/_model-create.mdx";
import ModelCreateClickHouse from "@site/docs/data-modeling/_partials/_classic-connectors/_clickhouse/_model-create.mdx";
import ModelExtendNativeQueryPostgreSQL from "@site/docs/data-modeling/_partials/_classic-connectors/_postgreSQL/_model-extend-native-query.mdx";
import ModelExtendNativeQueryMongoDB from "@site/docs/data-modeling/_partials/_classic-connectors/_mongoDB/_model-extend-native-query.mdx";
import ModelExtendNativeQueryClickHouse from "@site/docs/data-modeling/_partials/_classic-connectors/_clickhouse/_model-extend-native-query.mdx";
import ModelExtendLambdaTypescript from "@site/docs/data-modeling/_partials/_lambda-connectors/_typescript/_modelExtend.mdx";
import ModelExtendLambdaPython from "@site/docs/data-modeling/_partials/_lambda-connectors/_python/_modelExtend.mdx";
import ModelExtendLambdaGo from "@site/docs/data-modeling/_partials/_lambda-connectors/_go/_modelExtend.mdx";

# Models Read Data

## Introduction

In DDN, **Models** represent entities that can be queried in your data sources, such as tables, views, collections,
native operations and more.

A model brings together other metadata definitions to create a queryable entity in your API.

## Lifecycle

The lifecycle in creating a model in your metadata is as follows:

1. Have some entity in your data source that you want to make queryable via your API.
2. Introspect your data source using the DDN CLI and the relevant data connector.
3. Add the model to your metadata with the DDN CLI.
4. Create a build of your supergraph API with the DDN CLI.
5. Serve your build as your API with the Hasura engine either locally or in the cloud.
6. Iterate on your API by repeating this process and by editing your metadata manually as needed.

![](/img/data-modeling/ddn-cli-process.png)

## How to create a model

To add a model you will need to have a data connector already setup and connected to the data source. Follow the
tutorial in [How to Build with DDN](/getting-started/overview.mdx) to get to that point.

```bash title="Introspect your data source:"
ddn connector introspect <connector_name>
```

Whenever you update your data source, you can run the above command to fetch the latest resources.

```bash title="Show the resources discovered from your data source:"
ddn connector show-resources <connector_name>
```

This is an optional step and will output a list of resources that DDN discovered in your data source in the previous
step.

```bash title="Add the model from the discovered resources to your metadata:"
ddn model add <connector_name> <model_name>
```

Or you can optionally add all the models by specifying `"*"`.

```bash title="Add all models from your data source:"
ddn model add <connector_name> "*"
```

This will add models with their accompanying metadata definitions to your metadata.

You can now build your supergraph API, serve it, and query your data.

:::info Context for commands

Note that the above commands work without also adding the relevant subgraph to the command with the `--subgraph` flag
because this has been set in the CLI context. You can learn more about creating and switching contexts in the
[CLI context](/getting-started/overview.mdx) section. {/* TODO: Add link */}

:::

## How to extend a model

A model can be extended with more data by adding a native query or a relationship to a lambda data connector or other
data type.

### Native query

For instance, you can create a native query to perform any query natively on the underlying data source and then expose
that query as an additional field on your model.

The process of adding a native query is more or less unique to each data connector.

### Relationship 

With a relationship you can extend to another model or command. Including commands exposed via a lambda data connector.

The process of adding a relationship is more or less the same.

## How to update a model

## How to delete a model

## Tutorials

The tutorials below follow on from each particular tutorial in the
[How to Build with DDN](/getting-started/overview.mdx) section. Select the relevant data connector to follow the
tutorial.

### Creating a model

To query data from your API, you'll first need to create a model that represents that data.

<Tabs groupId="source-preference" className="api-tabs">
  <TabItem value="PostgreSQL" label="PostgreSQL">

    <ModelCreatePostgreSQL />

  </TabItem>
  <TabItem value="MongoDB" label="MongoDB">

    <ModelCreateMongoDB />

  </TabItem>
  <TabItem value="ClickHouse" label="ClickHouse">

    <ModelCreateClickHouse />

  </TabItem>
</Tabs>

### Extending a model

Models can be extended, allowing for transformation and enrichment of the data.

#### Via a native query

<Tabs groupId="source-preference" className="api-tabs">
  <TabItem value="PostgreSQL" label="PostgreSQL">

    <ModelExtendNativeQueryPostgreSQL />

  </TabItem>
  <TabItem value="MongoDB" label="MongoDB">

    <ModelExtendNativeQueryMongoDB />

  </TabItem>
  <TabItem value="ClickHouse" label="ClickHouse">

    <ModelExtendNativeQueryClickHouse />

  </TabItem>
</Tabs>

#### Via a lambda data connector

[Lambda data connectors](/business-logic/overview.mdx) allow you to expose custom business logic via your API. You can
also create [relationships](/data-modeling/relationship.mdx) between an existing model and this business logic to expand
the data a model can return.

We support lambda data connectors for [TypeScript](/business-logic/typescript.mdx),
[Python](/business-logic/python.mdx), and [Go](/business-logic/go.mdx).

<Tabs groupId="source-preference" className="api-tabs">
  <TabItem value="ts" label="TypeScript">

    <ModelExtendLambdaTypescript />

  </TabItem>
  <TabItem value="python" label="Python">

    <ModelExtendLambdaPython />

  </TabItem>
  <TabItem value="go" label="Go">

    <ModelExtendLambdaGo />

  </TabItem>
</Tabs>

### Updating a model

Your underlying data source may change over time. You can update your model to reflect these changes.

You'll need to update the mapping of your model to the data source by updating the
[DataConnectorLink](/supergraph-modeling/data-connector-links.mdx) object.

```bash title="Introspect your data source:"
ddn connector introspect <connector_name>
```

```bash title="Then, update your model:"
ddn model update <connector_name> users
```

### Deleting a model

```bash title="If you no longer need a model, you can delete it:"
ddn model remove users
```

## Reference

You can learn more about models in the metadata reference [docs](/supergraph-modeling/models.mdx).
