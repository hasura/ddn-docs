---
sidebar_position: 5
sidebar_label: Build your API & make queries
description: "Learn how to get started with Hasura DDN and your GraphQL API."
keywords:
  - hasura ddn
  - graphql api
  - quickstart
  - getting started
  - guide
---

import Thumbnail from "@site/src/components/Thumbnail";

# Build your API & Make Queries

## What's about to happen?

After [connecting a data source](/getting-started/build/03-connect-to-data/01-connect-a-source.mdx) and
[exposing a model](/getting-started/build/03-connect-to-data/03-add-source-entities.mdx), we'll create a new local build
of our API.

A build is a compiled, immutable state of your metadata which the Hasura Engine uses to run your API.

When you execute the command below, the CLI will create a new build for your supergraph. You'll then be able to execute
a GraphQL query on your API using any models you've added.

<Thumbnail src="/img/get-started/ERD/build-api.png" alt="Build your API" width="1000px" />

## Steps

:::tip Required

- [The DDN CLI, VS Code extension, and Docker installed](/getting-started/build/00-prerequisites.mdx)
- A new or existing [project](/getting-started/deployment/01-create-a-project.mdx)
- At least one [subgraph](/getting-started/build/02-init-subgraph.mdx)
- At least one [data connector running](/getting-started/build/03-connect-to-data/01-connect-a-source.mdx)
- [Models and/or Commands added](/getting-started/build/03-connect-to-data/03-add-source-entities.mdx) to your subgraph

:::

### Step 1. Create a supergraph build

Pass the `local` subcommand along with specifying the output directory as `engine` in the root of the project. This
directory is used by the docker-compose file to serve the engine locally:

```bash title="From the root of your project, run:"
ddn supergraph build local \
  --output-dir engine \
  --subgraph-env-file my_subgraph:my_subgraph/.env.my_subgraph.local
```

This will create a build of your supergraph.

With this command we're specifying the supergraph we want to use to build locally with `--supergraph`, the output
directory name for the engine with `--output-dir`, and the environment variables needed for each subgraph to build with
`--subgraph-env-file`.

:::info Environment variables

Note that when building a supergraph there can be multiple subgraphs, and we can add environment variables needed for
each. We can either specify the environment **file** with the subgraph as a prefix as we're doing above with
`--subgraph-env-file` or we can use the `--subgraph-env` flag to specify **individual environment variables** in the
command itself eg: `--subgraph-env my_subgraph:key=val`.

You should repeat `--subgraph-env-file` or `--subgraph-env` flags to specify multiple environment files — such as when
working with multiple subgraphs — or variables.

::::

:::tip Start your engines!

Want to test your supergraph? Make sure that your services are still up and running with the following command.

```bash title="Run:"
HASURA_DDN_PAT=$(ddn auth print-pat) docker compose up --build --watch
```

**If you haven't [included your connector(s)](/getting-started/build/03-connect-to-data/01-connect-a-source.mdx) in your
`compose.yaml`, don't forget to start it as well.**

:::

You can now navigate to
[`https://console.hasura.io/local/graphql?url=http://localhost:3000`](https://console.hasura.io/local/graphql?url=http://localhost:3000)
and interact with your API using the Hasura Console.

:::tip Privacy settings in some browsers

Your browser settings or privacy tools may prevent the Console from accessing your local Hasura instance. This could be
due to features designed to protect your privacy and security. Should you encounter one of these issues, we recommend
disabling these settings for the `console.hasura.io` domain.

[Chrome](https://www.google.com/chrome/) and [Firefox](https://www.mozilla.org/en-US/firefox/new/) are the recommended
browsers for the best experience with the Hasura Console including for local development.

:::

### Step 2. Write your first query

Use the GraphiQL explorer to either write a query or construct it using the menu on the left-hand side of the console.
When you're ready, hit the run button to execute your query.

```graphql title=" For example, if we have a Carts model, we can run the following query:"
query MyFirstQuery {
  mySubgraph_carts {
    id
    isComplete
    userId
  }
}
```

All types are namespaced with the subgraph to which they belong. Here, you can see that `carts` belongs to a subgraph
named `my_subgraph`. Thus, the query above will return a response that looks like this:

![Simple query with carts](/img/get-started/beta/console_simple-carts-query.png)

:::info Query names

In GraphQL, you can provide a name for your query, which in this example is `MyFirstQuery`. This name is customizable by
you at query time and just helps with logging and debugging.

:::

## What did this do?

When you executed the command above, the CLI used the Hasura metadata in your directory - generated based on your data
source(s) — to create a local build of your supergraph. This local build is immutable and can be used to test the
changes to your API before either making more changes or, eventually, creating a build on Hasura DDN.

Next, we recommend learning how easy it is to [add authorization rules](/getting-started/build/05-add-permissions.mdx),
which limit a user's access to data, using permissions.

## Next steps

Now that you have a build of your supergraph you can do a lot more with it. Here are some suggestions to allow you to
jump around the Getting Started section according to your interests:

- [Deploy to cloud](/getting-started/deployment/index.mdx) to make your API available to the world
- [Add permissions](/getting-started/build/05-add-permissions.mdx) to your models
- [Create relationships](/getting-started/build/07-create-a-relationship.mdx) between models
- [Mutate your data](/getting-started/build/08-mutate-data.mdx) with Hasura DDN
