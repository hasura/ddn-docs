---
sidebar_position: 2
sidebar_label: Quickstart from VS Code
description:
  Learn how to create a new Hasura project using VS Code and new Hasura CLI, connect to a database, and execute your
  first query to enhance your GraphQL application development process.
keywords:
  - hasura
  - graphql
  - vs code
  - quickstart
  - postgreSQL
  - metadata
  - hasura cli
  - query
  - hasura project
  - data sources
seoFrontMatterUpdated: true
toc_max_heading_level: 2
---

import Thumbnail from "@site/src/components/Thumbnail";
import Tabs from "@theme/Tabs";
import TabItem from "@theme/TabItem";

# Quickstart from VS Code

## Introduction

In this guide, we'll walk you through the steps to create a new Hasura project, connect a database, execute your first
query, create lightning-fast production builds, and incorporate business logic using TypeScript — all with VS Code and
the **new Hasura CLI**. Throughout this guide, you'll be introduced to new Hasura concepts, like builds, our new
metadata structure, and more.

:::tip Prerequisites

1. The [new Hasura CLI](/cli/installation.mdx)
2. The [Hasura VS Code extension](https://marketplace.visualstudio.com/items?itemName=HasuraHQ.hasura)
3. A PostgreSQL database

You can connect a local PostgreSQL database to Hasura DDN using the new [Hasura CLI](/cli/overview.mdx). If you don't
have a PostgreSQL database and prefer to connect to a cloud provider, check out our friends at
[Neon](https://neon.tech).

:::

:::info Don't want to set up a database?

We've provisioned a read-only database for you to use for this guide if you'd like. You can use the following connection
string in Step 3:

```text
postgresql://read_only:kd4555jkfjfkdj39f8f8d9d@35.236.11.122:5432/v3-docs-sample-app
```

:::

## Step 1: Log into Hasura

The first step is to log into Hasura Cloud with the CLI

```bash
hasura3 login
```

This will open up a browser window and initiate an OAuth2 login flow. If the browser window doesn't open automatically,
use the link shown in the terminal output to launch the flow.

:::info New CLI?!

Yep! If you can't tell already, we've completely rewritten the CLI from the ground up. You can learn more about the new
commands by running:

```bash
hasura3 --help
```

:::

## Step 2: Create a new project

To create a new project, use the following command, passing the directory where you want to create the project as an
argument. This command will create the configuration files and directory structure by default. It will also prompt you
to create a new Hasura DDN project in the cloud too.

```bash
hasura3 init --dir <PROJECT_DIRECTORY>
cd <PROJECT_DIRECTORY>
```

The CLI will prompt you with the following:

```bash
Use the arrow keys to navigate: ↓ ↑ → ←
Please choose how you would like to initialise Hasura DDN?
# highlight-start
  Create a new project        |        (Start building on a new DDN project)
# highlight-end
    From an existing project
    Empty project
```

Choose `Create a new project` and the CLI will respond with the following:

```bash
Creating a new project
Creating hasura.yaml ...
Creating build-profile ...
Creating metadata.hml ...
Project <PROJECT_NAME> is created at <DIR>
```

:::info What's a project?

Each project on Hasura DDN can have a corresponding local project that can be used for development. This local project
contains the following structure by default:

```text
├── build-profile.yaml
├── hasura.yaml
├── subgraphs
│   └── default
│       ├── commands
│       ├── dataconnectors
│       └── models
└── supergraph
    ├── auth-config.hml
    └── compatibility-config.hml
```

We'll dive into how to use these files as we continue through this guide. However, if you'd like more information on the
new project structure, see our page on [project configuration](/ci-cd/config.mdx).

:::

## Step 3: Connect a data source

The next step is to add a data source to the project so that we can build APIs on that source. With
Hasura DDN,
a source is added through a Data Connector. We will use the [Postgres Data Connector](https://hasura.io/connectors/postgres).

<Tabs groupId="db-location" className="api-tabs">
<TabItem value="hosted" label="Hosted Database">

If your database is hosted on a cloud provider, you can connect to it by copying your connection string which should
look like this:

```text
postgresql://<USERNAME>:<PASSWORD>@<HOST>:<PORT>/<DATABASE_NAME>
```

</TabItem>
<TabItem value="local" label="Local Database">

### Step 3.1: Start your database

If you want to connect a local database for development, you can use the new [Hasura CLI](/cli/overview.mdx) to create a
local daemon and securely connect to your database.

Start your local database. For example, if you are using Docker, you can run the following command:

```bash
docker run -d --name <DATABASE_NAME> -e POSTGRES_PASSWORD=<YOUR_PASSWORD> -p 5432:5432 <DATABASE_IMAGE>
```

### Step 3.2: Start the daemon

Start the Hasura daemon with the `daemon start` command:

```bash
hasura3 daemon start
```

The daemon will block this window while it runs.

### Step 3.3: Create a Secure Connect tunnel

Open a new tab or window for your terminal and run the `create` command:

```bash
hasura3 tunnel create <SOCKET>
```

The `<SOCKET>` argument is the address of your local database. For example, if you are running a local PostgreSQL
database on the default port, you would use `localhost:5432`.

The CLI will return a URL that you can use to connect to your database. You should use this URL to form a connection
string for your database, like this:

```text
postgresql://<USERNAME>:<PASSWORD>@<URL_RETURNED_BY_THE_CLI>/<DATABASE_NAME>
```

</TabItem>
</Tabs>

```bash
hasura3 metadata add-hub-connector pg_db \
--id hasura/postgres \
--url 'postgresql://read_only:kd4555jkfjfkdj39f8f8d9d@35.236.11.122:5432/v3-docs-sample-app'
```

If you don't want to use the Hasura hosted Postgres database or you have a local database you want to try out with
Hasura, replace the url. For example, you can use `postgres://username:password@localhost:5432/dbname` and it will still work
because Hasura can create tunnels to connect to local databases.

## Step 4: Start dev mode

Now that we have added a data source, let's start Hasura's dev mode so that we can make changes and get a GraphQL API 
automatically.

```bash
hasura3 dev
```

This command will start watching changes to the folder and keeps creating new builds that represent a new version of the 
GraphQL API. If you have used a local Postgres database, this command also creates tunnels to your local machine to make it
available to Hasura running on Cloud.

## Step 5: Launch VSCode and track tables

Launch VSCode in the project directory created by init command. Make sure Hasura extension is installed. Open the new `hml` 
file that was created at `subgraphs/default/dataconnectors/pg_db.hml`.

<Thumbnail src="/img/get-started/0.0.1_vscode-track-table.png" alt="VSCode data connector" width="1000px" />

The tables available in the database will be listed in this file. Move the cursor to any of the highlighted tables and 
a code action will show up as a yellow light bulb at the beginning of the line. Click on the light buld and then on 
the action "Track collection" to track the table (i.e. add the table to the metadata and hence to the GraphQL API).

<Thumbnail src="/img/get-started/0.0.1_vscode-track-table-codeaction.png" alt="VSCode track table code action" width="1000px" />

This action would prompt where the corresponding metadata should be added, which will default to `subgraphs/default/models/tablename.hml`.

Let's track the `products` and `manufacturers` tables.


:::info What are models?

This is the first new concept we've introduced in this guide. Models are a new way to represent your data in Hasura.

Models in the [OpenDD Spec](/data-domain-modeling/overview.mdx) refer to a collection of objects (such as rows in a
relational database, or documents in a NoSQL database) of a given OpenDD Spec [type](/data-domain-modeling/types.mdx).
Models are backed by a data source and can support CRUD operations. You can learn more about models
[here](/data-domain-modeling/models.mdx).

Ideally, you'll want to separate out each model into its own file. However, for the sake of this guide, we've kept them
all in one file.

:::

## Step 6: Navigate to console

Head to the terminal where `hasura3 dev` is running. It will show the console url for latest build. Click on the console
url to open it in the browser.

```
+---------------+------------------------------------------------------------+
| Build ID      | <BUILD_ID>                                                 |
+---------------+------------------------------------------------------------+
| Build Version | <BUILD_VERSION>                                            |
+---------------+------------------------------------------------------------+
| Build URL     | https://<PROJECT_NAME_AND_BUILD_ID>.ddn.hasura.app/graphql |
+---------------+------------------------------------------------------------+
| Project Id    | <PROJECT_ID>                                               |
+---------------+------------------------------------------------------------+
| Console Url   | https://console.hasura.io/project/<PROJECT_NAME>/graphql   |
+---------------+------------------------------------------------------------+
| FQDN          | <PROJECT_NAME_AND_BUILD_ID_STUB>.ddn.hasura.app            |
+---------------+------------------------------------------------------------+
| Environment   | default                                                    |
+---------------+------------------------------------------------------------+
```

Execute a sample GraphQL query using GraphiQL on Hasura Console.

<Thumbnail src="/img/get-started/0.0.1_console-graphql-query.png" alt="Console execute query" width="1000px" />


:::info What's a build?

Builds are a new concept in Hasura that allow you to quickly iterate and prototype on your project's metadata. A build
is an immutable, fully-functioning GraphQL API that represents a milestone in your development cycle.

It may be helpful to think of builds as git commits. Since each is deployed on Hasura DDN, it can be shared with other
users.

Each build is completely independent. One project can have multiple builds, out of which, one is applied to production.
This workflow allows for easier rollbacks on production, and greater collaboration during development.

:::

## TODO: remove? Step 6: Run your first query

Assuming you have some tables and data in your database, you can now run your first query! Head to the
[Console](https://console.hasura.io) URL returned by the CLI in the previous step. You'll be prompted to log in. Once
you're logged in, you'll be taken to the GraphiQL Explorer, where you can execute queries against your API.

We're using the docs sample app's schema for this guide's visuals, but you can use the GraphiQL Explorer to create your
query or write it manually:

<Thumbnail src="/img/get-started/0.0.1_console-execute-query-on-build.png" alt="Execute a query" width="1000px" />

<details>
<summary>Using our sample db? You can use this query!</summary>

```graphql
query OrdersQuery {
  orders {
    id
    status
    delivery_date
    user {
      id
      name
      email
    }
    product {
      id
      name
    }
  }
}
```

</details>

## Step 9: Incorporate custom business logic

With DDN, Hasura introduces a new way for writing custom business logic: by creating business logic data connectors.
These data connectors expose Collections, Procedures or Functions that can be added to Hasura Metadata as a Model or
a Command, which can be made available over the GraphQL API as a query or a mutation.

In the getting started guide, we will look how to to use TypeScript to write business logic.

```bash
hasura3 metadata add-hub-connector ts_logic \
  --id hasura/ts-deno \
  --url http://localhost:8100
```

This command will create all necessary files required by the `ts-deno` connector, including the DataConnector 
metadata and TypeScript functions.

Now that we added a new connector, head to the tab where `hasura3 dev` was running and restart the command.
Before starting it again, let's install [Deno](https://docs.deno.com/runtime/manual/getting_started/installation)
that are required to run this connector locally.

```bash
# install deno
curl -fsSL https://deno.land/x/install/install.sh | sh

# start hasura dev
hasura3 dev
```

This command will now start the connector locally using `deno` and then creates a tunnel from Hasura Cloud to your local
machine so that it is reachable. It will also update the schema of the connector, which will be created based on the 

There will be a new file called `index.ts` in this directory. This file will contain a simple hello world function 
including a JSDoc comment:

```typescript
// functions/index.ts

/**
 * Tells you Hello World!
 *
 * @returns {string} Hello World!
 * @pure This function should only query data without making modifications
 */
export function helloWorld() {
  return "Hello World!";
}
```

**It's important to include the JSDoc comment**. This aids the TypeScript connector in understanding the function's
schema and allows the VS Code extension to scaffold your metadata appropriately. You can read more in the connector's
[README](https://github.com/hasura/ndc-typescript-deno#typescript-functions-format).

## Step 10: Track the function

Switch to VSCode and open `subgraphs/default/dataconnectors/ts_logic/ts_logic.hml`. The function `helloWorld` will be
underlined with a code action to track the function as a command in the subgraph. This will create a Command metadata
object which will expose this function as a query.

<Thumbnail src="/img/get-started/0.0.1_vscode-track-function.png" alt="Track a function in VSCode" width="1000px" />

Executing this code action will prompt you to create a new file withe default at `subgraphs/default/commands/helloWorld.hml`.
This new file would trigger `hasura3 dev` to create a new build which we can 

## Step 11: Execute the function through GraphQL query

TODO: insert screenshot

## What's next?

### Iterate on your metadata

We've just demonstrated how to quickly get set up and running with Hasura. Now that you've got a project up and running,
you can iterate on your metadata and build out your API. Head back to your IDE, make some modifications, create a new
build, and see what happens 🎉

Learn more about structuring your data supergraph by checking out our
[Data Domain Modeling](/data-domain-modeling/overview.mdx) section.
