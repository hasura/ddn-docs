---
sidebar_position: 9
sidebar_label: Global ID
description: Use the Relay Global ID specification to encode the type and ID of an object in a single string.
toc_max_heading_level: 4
keywords:
  - hasura
  - relay
  - graphql
  - global id
---

# OpenDD Global ID

## Introduction

A Global ID is a unique identifier for an object across the entire application, not just within a specific table or
type. Think of it as an ID which you can use to fetch any object directly, regardless of what kind of object it is. This
is different from typical database IDs, which are often guaranteed unique only within a particular table.

[//]: # "TODO: As long as it has already been fetched?"

Hasura's Global ID implementation can be used to provide options for GraphQL clients to elegantly handle caching and
data refetching in a predictable and standardized way.

The Global ID generated by Hasura DDN follows the
[Relay Global ID spec](https://relay.dev/graphql/objectidentification.htm).

As the example below shows, the `user` object type has a field `user_id` that uniquely identifies a user. The Global ID
for the `user` object type will be generated using the `user_id` field:

For the following request on a model which has enabled Global ID:

```graphql
{
  user_by_id(user_id: 1) {
    id // Global ID
    user_id
    name
  }
}
```

The response obtained should look like the following:

```json
{
  "data": {
    "user_by_id": {
      "id": "eyJ2ZXJzaW9uIjoxLCJ0eXBlbmFtZSI6IkFydGljbGUiLCJpZCI6eyJhcnRpY2xlX2lkIjoyfX0=",
      "user_id": 1,
      "name": "Bob"
    }
  }
}
```

Now, with the Global ID received above, the `User` object corresponding to `user_id: 1` can be retrieved, as shown
below.

```graphql
{
  node(id: "eyJ2ZXJzaW9uIjoxLCJ0eXBlbmFtZSI6IkFydGljbGUiLCJpZCI6eyJhcnRpY2xlX2lkIjoyfX0=") {
    id
    __typename
    ... on User {
      name
    }
  }
}
```

The response to the above request should identify the `User` with `user_id: 1`.

```json
{
  "node": {
    "id": "eyJ2ZXJzaW9uIjoxLCJ0eXBlbmFtZSI6IkFydGljbGUiLCJpZCI6eyJhcnRpY2xlX2lkIjoyfX0=",
    "__typename": "User",
    "name": "Bob"
  }
}
```

## Description

You can configure an `objectType` to generate a Global ID, by extending its definition to accept the list of the fields
that will uniquely identify the object.

### Metadata structure:

1. `objectType`

```json
{
  "kind": "ObjectType",
  "name": ...,
  "fields": ...,
  // highlight-next-line
  "globalID": <GlobalId>
}
```

2. `model`

```json
{
  "kind": "Model",
  "name": ...,
  "dataType": ...,
  // highlight-next-line
  "globalIDSource": <GlobalIDSource>
}
```

### Metadata fields reference:

1. `GlobalID` - `[String]` - A list of field(s) which can uniquely identify the object.

2. `GlobalIDSource` - boolean - Boolean value that indicates to that the model is the Global ID source for the related
   object.

## Example

Let's consider the following `article` object and let's assume the `article_id` field uniquely identifies an article:

```json
{
  "kind": "ObjectType",
  "name": "article",
  "fields": [
    {
      "name": "article_id",
      "type": "Int"
    },
    {
      "name": "title",
      "type": "String"
    },
    {
      "name": "author_id",
      "type": "Int"
    }
  ]
}
```

We need to add the `article_id` field in the `globalID`.

```json
{
  "kind": "ObjectType",
  "name": "article",
  "fields": [
    {
      "name": "article_id",
      "type": "Int"
    },
    {
      "name": "title",
      "type": "String"
    },
    {
      "name": "author_id",
      "type": "Int"
    }
  ],
  // highlight-next-line
  "globalID": ["article_id"]
}
```

Next, we need to choose the model that implements the `article` object type to be the Global ID source for the object
type `article`. This can be done by adding `globalIDSource: true` in the model's definition:

```json
{
  "kind": "Model",
  "name": "Articles",
  "dataType": "article",
  // highlight-next-line
  "globalIDSource": true
}
```

:::info Consideration for `id` fields and multiple models

For an object type to generate a Global ID, it should not have any field named `id`, because it will be generated
automatically.

[//]: # "TODD: Link to how to alias a field named id if one already exists"

Additionally, multiple models can implement the same object type, **but only one model out of this selection can be the
Global ID source of the object type.**

:::

With the above changes, the following GraphQL schema will be generated:

```graphql
interface Node {
  id: ID!
}

type Articles implements Node {
  article_id: Int!
  title: String!
}
```

### Examples of GraphQL requests executed on the above GraphQL schema

1. GraphQL Request to fetch `Article` by `id` that fetches the Global ID,

```graphql
{
  article_by_id(article_id: 1) {
    id // Global ID
    article_id
  }
}
```

The response obtained should look like the following:

```json
{
  "data": {
    "article_by_id": {
      "id": "eyJ2ZXJzaW9uIjoxLCJ0eXBlbmFtZSI6IkFydGljbGUiLCJpZCI6eyJhcnRpY2xlX2lkIjoyfX0=",
      "article_id": 1
    }
  }
}
```

2. GraphQL request to fetch an object using the Global ID.

```graphql
{
  node(id: "eyJ2ZXJzaW9uIjoxLCJ0eXBlbmFtZSI6IkFydGljbGUiLCJpZCI6eyJhcnRpY2xlX2lkIjoyfX0=") {
    id
    __typename
    ... on Article {
      title
    }
  }
}
```

The response corresponding to the above request should identify the `Article` with `article_id: 1`.

```json
{
  "node": {
    "id": "eyJ2ZXJzaW9uIjoxLCJ0eXBlbmFtZSI6IkFydGljbGUiLCJpZCI6eyJhcnRpY2xlX2lkIjoyfX0=",
    "__typename": "Article",
    "title": "Article title 1"
  }
}
```
