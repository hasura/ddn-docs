---
sidebar_position: 6
sidebar_label: Commands
description: Hasura Data Domain Specification Commands
keywords:
  - hasura
  - data
  - data domain specification
  - dds
  - commands
---

# OpenDD Commands

## Introduction

Commands are backed by **functions** or **procedures** declared in a `DataSource` allowing you to execute business logic
directly from your GraphQL API. You can use them to validate, process, or enrich some data, call another API, or log a
user in. As an example, with commands you can connect to a REST endpoint which can be your own custom server, a public
API, or a serverless function.

To create a command, you need to define an OpenDD object with `"kind": "Command"`, which has both `name` and
`outputType` fields.

### Metadata structure

```json
{
  "kind": "Command",
  "name": "<CommandName>",
  "arguments": "<ArgumentDefinition>",
  "outputType": "<Type>",
  "source": "<CommandSourceConfiguration>",
  "graphql": "<GraphQLConfiguration>"
}
```

| Field        | Type                                                        | Required | Description                                                                 |
| ------------ | ----------------------------------------------------------- | -------- | --------------------------------------------------------------------------- |
| `name`       | `String`                                                    | true     | Name of the command.                                                        |
| `outputType` | `String`                                                    | true     | The name of the return type of command (either Custom/Primitive/Container). |
| `arguments`  | [`[ArgumentDefinition]`](#argumentdefinition)               | false    | The argument definition for the command                                     |
| `source`     | [`CommandSourceConfiguration`](#commandsourceconfiguration) | true     | Source configuration for the command.                                       |
| `graphql`    | [`GraphQLConfiguration`](#graphqlconfiguration)             | true     | GraphQL configuration for the command.                                      |

#### ArgumentDefinition

Arguments is a list of objects that defines the arguments for the command. An argument object has the following fields:

```json
{
  "name": "<String>",
  "type": "<Type>"
}
```

| Field  | Type     | Required | Description           |
| ------ | -------- | -------- | --------------------- |
| `name` | `String` | true     | Name of the argument. |
| `type` | `Type`   | true     | Type of the argument  |

#### CommandSourceConfiguration

Source is an object that defines the data source for the command. It has the following fields:

```json
{
  "DataSource": "<DataSourceName>",
  // Either function or procedure
  "function": "<CollectionName>",
  "typeMappings": "<TypeMappings>"
}
```

A command can either be backed by a function or a procedure.

| Field                | Type     | Required | Description                                                                |
| -------------------- | -------- | -------- | -------------------------------------------------------------------------- |
| `DataSource`         | `String` | true     | Name of the data source.                                                   |
| `function/procedure` | `String` | true     | Name of the function or procedure. One of these must be chosen.            |
| `typeMappings`       | `Object` | false    | Type mappings for the command. Required only if `outputType` is Custom     |
| `argumentMappings`   | `Object` | false    | Argument mappings for the command. Required only if `arguments` is defined |

:::info Functions or Procedures?

Functions always return a value whereas procedures always return an object. Functions are used for read operations and
procedures are used for write operations.

:::

#### GraphQLConfiguration

GraphQL is an object that defines the GraphQL configuration for the command. It has the following fields:

```json
{
  "rootFieldName": "<GraphQlFieldName>",
  "rootFieldKind": "<GraphQlRootFieldKind>"
}
```

| Field           | Type     | Required | Description                                  |
| --------------- | -------- | -------- | -------------------------------------------- |
| `rootFieldName` | `String` | true     | The GraphQL root field name for the command. |
| `rootFieldKind` | `String` | true     | The type of GraphQL operation (`Query`).     |

## Examples

```json
{
  "kind": "Command",
  "name": "get_article_by_id",
  "arguments": [
    {
      "name": "article_id",
      "type": "Int"
    }
  ],
  "outputType": "commandArticle",
  "source": {
    "dataSource": "db",
    "function": "get_article_by_id",
    "typeMappings": {
      "commandArticle": {
        "fieldMappings": {
          "article_id": {
            "column": "id"
          },
          "title": {
            "column": "title"
          },
          "author_id": {
            "column": "author_id"
          }
        }
      }
    },
    "argumentMappings": {
      "article_id": "id"
    }
  },
  "graphql": {
    "rootFieldName": "getLatestArticle",
    "rootFieldKind": "Query"
  }
}
```
