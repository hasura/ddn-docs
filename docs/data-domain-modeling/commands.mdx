---
sidebar_position: 6
sidebar_label: Commands
description:
  Learn how to utilize Hasura Data Domain Specification commands to execute business logic directly from your GraphQL
  API.
toc_max_heading_level: 4
keywords:
  - hasura commands
  - hasura dds commands
  - graphql api enforcement
  - back-end business logic
  - hasura function
  - datasources in hasura
  - hasura metadata structure
  - rest endpoint
  - custom server
  - serverless function
seoFrontMatterUpdated: true
---

# OpenDD Commands

## Introduction

Commands are backed by **functions** or **procedures** declared in a `DataSource` allowing you to execute business logic
directly from your GraphQL API. You can use them to validate, process, or enrich some data, call another API, or log a
user in. As an example, with commands you can connect to a REST endpoint which can be your own custom server, a public
API, or a serverless function.

To create a command, you need to define an OpenDD object with `"kind": "Command"`, which has both `name` and
`outputType` fields.

### Metadata structure

```yaml
kind: Command
name: <String>
arguments: <ArgumentDefinition>
outputType: <String>
source: <CommandSourceConfiguration>
graphql: <GraphQLConfiguration>
```

| Field        | Type                                                        | Required | Description                                            |
| ------------ | ----------------------------------------------------------- | -------- | ------------------------------------------------------ |
| `name`       | `String`                                                    | true     | Name of the command.                                   |
| `arguments`  | [`[ArgumentDefinition]`](#argumentdefinition)               | false    | The argument definition for the command.               |
| `outputType` | `String`                                                    | true     | The name of the return [type](./types.mdx) of command. |
| `source`     | [`CommandSourceConfiguration`](#commandsourceconfiguration) | true     | Source configuration for the command.                  |
| `graphql`    | [`GraphQLConfiguration`](#graphqlconfiguration)             | true     | GraphQL configuration for the command.                 |

#### ArgumentDefinition {#argumentdefinition}

Arguments is a list of objects that defines the arguments for the command. An argument object has the following fields:

```json
{
  "name": "<String>",
  "type": "<Type>"
}
```

| Field  | Type     | Required | Description                                      |
| ------ | -------- | -------- | ------------------------------------------------ |
| `name` | `String` | true     | Name of the argument.                            |
| `type` | `Type`   | true     | [Type](./types.mdx) of the argument as a string. |

#### CommandSourceConfiguration {#commandsourceconfiguration}

Source is an object that defines the data source for the command. It has the following fields:

```yaml
{
DataSource: <String>
// Either function OR procedure
function: <String>
typeMappings: <TypeMappings>
argumentMappings: <ArgumentMappings>
}
```

A command can either be backed by a function or a procedure.

| Field                     | Type                                               | Required | Description                                                                |
| ------------------------- | -------------------------------------------------- | -------- | -------------------------------------------------------------------------- |
| `DataSource`              | `String`                                           | true     | Name of the [data source](./data-sources.mdx).                             |
| `function` or `procedure` | `String`                                           | true     | Name of the function or procedure. One of these must be chosen.            |
| `typeMappings`            | [`TypeMappings`](./common-syntax.mdx#typemappings) | false    | [Type](./types.mdx) mappings for the command.                              |
| `argumentMappings`        | [`ArgumentMappings`](#argumentmappings)            | false    | Argument mappings for the command. Required only if `arguments` is defined |

:::info Functions or Procedures?

Functions are used for read operations and procedures are used for write operations.

:::

#### ArgumentMappings {#argumentmappings}

The `argumentMappings` are used to define the mapping between the arguments of the OpenDD `arguments` and the arguments
of the `function` or `procedure`. It has the following fields:

```yaml
<OpenDDSArgumentName>: <NDCArgumentName>
```

| Field                 | Type     | Required | Description                                                                                  |
| --------------------- | -------- | -------- | -------------------------------------------------------------------------------------------- |
| `OpenDDSArgumentName` | `String` | true     | Name of the argument of the command                                                          |
| `NDCArgumentName`     | `String` | true     | The name of the argument in function or procedure to which the `OpenDDSArgumentName` maps to |

#### GraphQLConfiguration {#graphqlconfiguration}

GraphQL is an object that defines the GraphQL configuration for the command. It has the following fields:

```yaml
rootFieldName: <String>
rootFieldKind: <String>
```

| Field           | Type     | Required | Description                                  |
| --------------- | -------- | -------- | -------------------------------------------- |
| `rootFieldName` | `String` | true     | The GraphQL root field name for the command. |
| `rootFieldKind` | `String` | true     | The type of GraphQL operation (`Query`).     |

## Examples

Below, we're creating a `Command` called `get_article_by_id` which takes an argument `article_id` of type `Int` and
returns an object of type `commandArticle`. The command is backed by a function called `get_article_by_id` in the `db`
data source. The function returns an object with fields `id`, `title`, and `author_id`. The `id` field is mapped to the
`article_id` argument and the `title` and `author_id` fields are mapped to the `title` and `author_id` columns
respectively.

```yaml
kind: Command
name: get_article_by_id
arguments:
  - name: article_id
    type: Int
outputType: commandArticle
source:
  dataSource: db
  function: get_article_by_id
  typeMappings:
    commandArticle:
      fieldMappings:
        article_id:
          column: id
        title:
          column: title
        author_id:
          column: author_id
  argumentMappings:
    article_id: id
graphql:
  rootFieldName: getLatestArticle
  rootFieldKind: Query
```
