---
sidebar_position: 3
sidebar_label: Models
description:
  Learn how to create and manage Hasura data domain models. These models are crucial links between your data sources and
  the Hasura generated API.
toc_max_heading_level: 4
keywords:
  - hasura
  - data domain models
  - opendd models
  - hasura api
  - data sources
  - graphql configuration
  - model creation
  - hasura database
  - source configuration
  - rest api
seoFrontMatterUpdated: true
---

# OpenDD Models

## Introduction

Models are the link between your data connectors and the API Hasura generates. A model may be backed by a database
table, an ad-hoc SQL query, a pre-materialized view, a custom REST or GraphQL API server, etc.

Once a model is declared it will then often be referenced by `Relationship` and/or `Permissions` objects.

## Description

To create a model, you need to define an OpenDD object with `kind: Model` and `version: v1`. The object `definition`
has the following fields:

### Metadata structure

```yaml
kind: Model
version: v1
definition:
  name: <ModelName>
  objectType: <TypeName>
  globalIDSource: true | false
  source: <SourceConfiguration>
  graphql: <GraphQLConfiguration>
  arguments: <ArgumentDefinition>
  filterableFields: <FilterableFields>
  orderableFields: <OrderableFields>
```

| Field              | Type                                                                                 | Required | Description                                                           |
| ------------------ | ------------------------------------------------------------------------------------ | -------- | --------------------------------------------------------------------- |
| `name`             | `String`                                                                             | true     | Name of the model.                                                    |
| `objectType`       | `String`                                                                             | true     | [Type](/data-domain-modeling/types.mdx) of this model.                |
| `globalIDSource`   | `Boolean`                                                                            | false    | If a [Global ID](./global-id.mdx) should be generated for this model. |
| `source`           | [`SourceConfiguration`](/data-domain-modeling/models.mdx/#source)                    | true     | Source configuration for the model.                                   |
| `graphql`          | [`GraphQLConfiguration`](data-domain-modeling/models.mdx/#graphql)                   | true     | GraphQL configuration for the model.                                  |
| `arguments`        | [`[ArgumentDefinition]`](data-domain-modeling/common-syntax.mdx/#argumentdefinition) | false    | The argument definition for the model.                                |
| `filterableFields` | [`[FilterableFieldDefinition]`](#filterablefielddefinition)                          | true     | Filterable fields for the model.                                      |
| `orderableFields`  | [`[OrderableFieldDefinition]`](#orderablefielddefinition)                            | true     | Orderable fields for the model.                                       |

:::note Filterable/Orderable Fields support

At the moment, we don't support field level filterable/orderable customizations. So, you will have to provide an
exhaustive list of the fields of your model in `filterableFields` and `orderableFields`.

:::

#### SourceConfiguration

Source configuration is an object that defines the data source for the model. It has the following fields:

```yaml
source:
  dataConnectorName: <DataConnectorName>
  collection: <CollectionName>
  typeMapping: <TypeMapping>
```

| Field           | Type                                             | Required | Description                  |
| --------------- | ------------------------------------------------ | -------- | ---------------------------- |
| `dataConnector` | `String`                                         | true     | Name of the data source.     |
| `collection`    | `String`                                         | true     | Name of the collection.      |
| `typeMapping`   | [`TypeMapping`](./common-syntax.mdx#typemapping) | true     | Type mappings for the model. |

#### GraphQLConfiguration

GraphQL is an object that defines the GraphQL configuration for the model. It has the following fields:

```yaml
graphql:
  selectUniques: <SelectUniques>
  selectMany: <SelectMany>
  filterExpressionType: <FilterExpressionType>
  orderByExpressionType: <OrderByExpressionType>
  argumentsInputType: <ArgumentsInputType>
```

| Field                   | Type                                | Required | Description                                                                        |
| ----------------------- | ----------------------------------- | -------- | ---------------------------------------------------------------------------------- |
| `selectUniques`         | [`[SelectUniques]`](#selectuniques) | true     | Select uniques configuration for the model.                                        |
| `selectMany`            | [`SelectMany`](#selectmany)         | false    | Select many configuration for the model.                                           |
| `filterExpressionType`  | `String`                            | false    | GraphQL type name for the filter input. Default - `<ModelName>_bool_exp`           |
| `orderByExpressionType` | `String`                            | false    | GraphQL type name for the order by input. Default - `<ModelName>_order_by`         |
| `argumentsInputType`    | `String`                            | false    | GraphQL type name for the model arguments input. Default - `<ModelName>_arguments` |

##### SelectUniques

Select uniques is an array of objects that define the unique identifiers for the model. It has the following fields:

```yaml
selectUniques:
  queryRootField: <QueryRootField>
  uniqueIdentifier: <UniqueIdentifier>
```

| Field              | Type     | Required | Description                                                          |
| ------------------ | -------- | -------- | -------------------------------------------------------------------- |
| `queryRootField`   | `String` | true     | Name of the query root field.                                        |
| `uniqueIdentifier` | `Array`  | true     | Set of fields which can uniquely identify a row/object in the model. |

##### SelectMany

Select many is an object that defines the select many configuration for the model. It has the following fields:

```yaml
selectMany:
  queryRootField: <QueryRootField>
```

| Field            | Type     | Required | Description             |
| ---------------- | -------- | -------- | ----------------------- |
| `queryRootField` | `String` | true     | Name of the query root. |

#### FilterableFieldDefinition

Filterable field definition is an object that lists down the allowed operators for a given field.

```yaml
filterableFields:
  - fieldName: <String>
    operators:
      enableAll: true
```
| Field            | Type     | Required | Description                                                          |
| ---------------- | -------- | -------- | -------------------------------------------------------------------- |
| `fieldName`      | `String` | true     | Name of the field.                                              |
| `operators`      | `Object` | true     | Allowed operators (at the moment, we only support `enableAll: true`) |

#### OrderableFieldDefinition

Orderable field definition is an object that lists down the allowed order by directions for a given field.

```yaml
orderableFields:
  - fieldName: <String>
    orderByDirections:
      enableAll: true
```

| Field               | Type     | Required | Description                                                                    |
| ------------------- | -------- | -------- | ------------------------------------------------------------------------------ |
| `fieldName`         | `String` | true     | Name of the field.                                                             |
| `orderByDirections` | `Object` | true     | Allowed order by directions (at the moment, we only support `enableAll: true`) |

## Examples

In this example, we're creating a model called `Authors` backed by a database table called `authors` in the `db` data
source:

```yaml
kind: Model
version: v1
definition:
  name: ArticlesByAuthor
  objectType: article
  arguments:
  - name: author_id
    type: Int!
  source:
    dataConnectorName: db
    collection: articles_by_author
    typeMapping:
      article:
        fieldMapping:
          article_id:
            column: id
          title:
            column: title
          author_id:
            column: author_id
  graphql:
    selectUniques:
    - queryRootField: ArticlesByAuthorByID
      uniqueIdentifier:
      - article_id
    selectMany:
      queryRootField: ArticlesByAuthorMany
    orderByExpressionType: ArticlesByAuthorOrderBy
    filterExpressionType: ArticlesByAuthorWhereExp
    argumentsInputType: ArticlesByAuthorArgs
  filterableFields:
  - fieldName: article_id
    operators:
      enableAll: true
  - fieldName: title
    operators:
      enableAll: true
  - fieldName: author_id
    operators:
      enableAll: true
  orderableFields:
  - fieldName: article_id
    orderByDirections:
      enableAll: true
  - fieldName: title
    orderByDirections:
      enableAll: true
  - fieldName: author_id
    orderByDirections:
      enableAll: true
```
