---
sidebar_position: 7
sidebar_label: Permissions
description: Hasura Data Domain Permissions
keywords:
  - hasura
  - data
  - data domain specification
  - dds
  - permissions
  - access control
  - authorization
  - rbac
---

# Hasura Data Domain Permissions

## Introduction

Hasura lets you define access control or permissions on [models](./models.mdx) and [output types](./types.mdx) in your
data domain.

On models, you can define access control rules to specify which items in the collection of models will be accessible to
a role.

On output types, you can define access control rules to specify which fields of the type are accessible to a role.
Defining permissions on output types is useful, as multiple models can return the same output type.

## Output Type Permissions

An Output Type Permission will need the type and the role(s) for which the permission should be defined. For each role,
you will need to define the fields accessible for that role.

### Metadata Structure

```json
{
  "kind": "typeOutputPermissions",
  "typeName": "<TypeName>",
  "permissions": {
    "<RoleName>": {
      "fields": ["field1", "field2"]
    }
  }
}
```

| Field       | Type                                 | Required | Description                                                                                                                    |
|-------------|--------------------------------------|----------|--------------------------------------------------------------------------------------------------------------------------------|
| typeName    | `String`                             | true     | Name of the output type on which permissions are to be defined.                                                                |
| permissions | `{"<RoleName>": <OutputPermission>}` | true     | The permissions object for this type. Each key of the object is a role, and the value is an object of type `OutputPermission`. |

Note: `RoleName` is the role in `String`.

#### OutputPermission

| Field  | Type       | Required | Description                                                        |
| ------ | ---------- | -------- | ------------------------------------------------------------------ |
| fields | `[String]` | true     | List of field names (of the type) that are accessible to the role. |

### Examples

To define permissions on an output type `article` for `admin` and `user` role -

```json
{
  "kind": "typeOutputPermissions",
  "typeName": "article",
  "permissions": {
    "admin": {
      "fields": ["id", "title", "author_id"]
    },
    "user": {
      "fields": ["id", "title"]
    }
  }
}
```

If a role doesn't define any permissions for this type, then it won't be accessible to that role.

## Model Select Permissions

A Model Select Permission will need the model name and the role(s) for which the permission should be defined. For each
role, you will need to define an optional filter expression. Objects (or rows/documents) that satisfy this filter
predicate will be returned for that role.

### Metadata Structure

```json
{
  "kind": "modelSelectPermissions",
  "modelName": "<ModelName>",
  "permissions": {
    "<RoleName>": {
      "filter": <ModelPredicate>
    },
    "<RoleName>": {
      "filter": <ModelPredicate>
    }
  }
}
```

| Field       | Type                                 | Required | Description                                                                                                                    |
|-------------|--------------------------------------|----------|--------------------------------------------------------------------------------------------------------------------------------|
| modelName   | `String`                             | true     | Name of the model on which permissions are to be defined.                                                                      |
| permissions | `{"<RoleName>": <SelectPermission>}` | true     | The permissions object for this type. Each key of the object is a role, and the value is an object of type `SelectPermission`. |

Note: `RoleName` is the role in `String`.

#### SelectPermission

| Field  | Type             | Required | Description                                                                                                                                                                                                                                                                                                                 |
| ------ | ---------------- | -------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| filter | `ModelPredicate` | false    | Optional predicate to satisfy. This predicate can use operators supported by the modelâ€™s data source. If the filter is missing then all rows are returned. If the filter is present, then only the rows satisfying this filter expression are returned. (Reference of [ModelPredicate](./common-syntax.mdx#modelpredicate)) |

### Examples

```json
{
  "kind": "modelSelectPermissions",
  "modelName": "Articles",
  "permissions": {
    "admin": {},
    "user_1": {
      "filter": {
        "fieldComparison": {
          "field": "author_id",
          "operator": "_eq",
          "value": {
            "sessionVariable": "x-hasura-user-id"
          }
        }
      }
    },
    "user_2": {
      "filter": {
        "and": [
          {
            "fieldComparison": {
              "field": "title",
              "operator": "like",
              "value": {
                "literal": "Functional"
              }
            }
          }
        ]
      }
    }
  }
}
```
