---
sidebar_position: 7
sidebar_label: Relationships
description:
  "Expand your understanding of relationships in Hasura, learn how to define linked or nested data queries, create
  relationships between types and models. Explore mapping relationships with in-depth annotated examples and explore
  connecting data across namespaces."
keywords:
  - hasura relationships
  - data mapping
  - graphql queries
  - linked data queries
  - nested data queries
  - hasura data modeling
  - data connectivity
  - hasura data sources
  - hasura api configuration
toc_max_heading_level: 4
seoFrontMatterUpdated: true
---

# Relationships

## Introduction

A relationship allows you to query nested or linked information, for example from `Manufacturers` to `Products`. A
relationship allows you extend [type](./types.mdx) objects with related [models](./models.mdx) or related
[commands](./commands.mdx).

To create a relationship, you will need to define an object with `kind: Relationship` and `version: v1`. The object
`definition` has a `name`, the `source` type, a `target` model and the `mapping` between the two.

## Metadata structure

### Relationship

Definition of a relationship on an OpenDD type which allows it to be extended with related models or commands.

| Key          | Schema                            | Required | Description |
| ------------ | --------------------------------- | -------- | ----------- |
| `kind`       | `Relationship`                    | true     |             |
| `version`    | `v1`                              | true     |             |
| `definition` | [RelationshipV1](#relationshipv1) | true     |             |

#### RelationshipV1

Definition of a relationship on an OpenDD type which allows it to be extended with related models or commands.

| Key           | Schema                                        | Required | Description                                                                                                                  |
| ------------- | --------------------------------------------- | -------- | ---------------------------------------------------------------------------------------------------------------------------- |
| `name`        | string                                        | true     | The name of the relationship.                                                                                                |
| `source`      | string                                        | true     | The source type of the relationship.                                                                                         |
| `target`      | [RelationshipTarget](#relationshiptarget)     | true     | The target of the relationship.                                                                                              |
| `mapping`     | [[RelationshipMapping](#relationshipmapping)] | true     | The mapping configuration of source to target for the relationship.                                                          |
| `description` | string                                        | false    | The description of the relationship. Gets added to the description of the relationship in the graphql schema.                |
| `deprecated`  | [Deprecated](#deprecated) / null              | false    | Whether this relationship is deprecated. If set, the deprecation status is added to the relationship field's graphql schema. |

**Example:**

```yaml
name: Articles
source: author
target:
  model:
    name: Articles
    namespace: null
    subgraph: null
    relationshipType: Array
mapping:
  - source:
      fieldPath:
        - fieldName: author_id
    target:
      modelField:
        - fieldName: author_id
description: Articles written by an author
```

#### RelationshipMapping

Definition of a how a particular field in the source maps to a target field or argument.

| Key      | Schema                                                  | Required | Description                                             |
| -------- | ------------------------------------------------------- | -------- | ------------------------------------------------------- |
| `source` | [RelationshipMappingSource](#relationshipmappingsource) | true     | The source configuration for this relationship mapping. |
| `target` | [RelationshipMappingTarget](#relationshipmappingtarget) | true     | The target configuration for this relationship mapping. |

**Example:**

```yaml
source:
  fieldPath:
    - fieldName: author_id
target:
  modelField:
    - fieldName: author_id
```

#### RelationshipMappingTarget

The target configuration for a relationship mapping.

**Must have exactly one of the following fields:**

| Key          | Schema                                                            | Required | Description |
| ------------ | ----------------------------------------------------------------- | -------- | ----------- |
| `argument`   | [ArgumentMappingTarget](#argumentmappingtarget)                   | false    |             |
| `modelField` | [[RelationshipSourceFieldAccess](#relationshipsourcefieldaccess)] | false    |             |

#### ArgumentMappingTarget

| Key            | Schema | Required | Description |
| -------------- | ------ | -------- | ----------- |
| `argumentName` | string | true     |             |

#### RelationshipMappingSource

The source configuration for a relationship mapping.

**Must have exactly one of the following fields:**

| Key         | Schema                                                            | Required | Description |
| ----------- | ----------------------------------------------------------------- | -------- | ----------- |
| `value`     | [ValueExpression](#valueexpression)                               | false    |             |
| `fieldPath` | [[RelationshipSourceFieldAccess](#relationshipsourcefieldaccess)] | false    |             |

#### RelationshipSourceFieldAccess

| Key         | Schema | Required | Description |
| ----------- | ------ | -------- | ----------- |
| `fieldName` | string | true     |             |

#### ValueExpression

An expression which evaluates to a value that can be used in permissions.

**Must have exactly one of the following fields:**

| Key               | Schema | Required | Description |
| ----------------- | ------ | -------- | ----------- |
| `literal`         |        | false    |             |
| `sessionVariable` | string | false    |             |

#### RelationshipTarget

The target for a relationship.

**Must have exactly one of the following fields:**

| Key       | Schema                                                  | Required | Description |
| --------- | ------------------------------------------------------- | -------- | ----------- |
| `model`   | [ModelRelationshipTarget](#modelrelationshiptarget)     | false    |             |
| `command` | [CommandRelationshipTarget](#commandrelationshiptarget) | false    |             |

**Example:**

```yaml
model:
  name: Articles
  namespace: null
  subgraph: null
  relationshipType: Array
```

#### CommandRelationshipTarget

The target command for a relationship.

| Key        | Schema | Required | Description                                                           |
| ---------- | ------ | -------- | --------------------------------------------------------------------- |
| `name`     | string | true     | The name of the command.                                              |
| `subgraph` | string | false    | The subgraph of the target command. Defaults to the current subgraph. |

#### ModelRelationshipTarget

The target model for a relationship.

| Key                | Schema                                | Required | Description                                                         |
| ------------------ | ------------------------------------- | -------- | ------------------------------------------------------------------- |
| `name`             | string                                | true     | The name of the data model.                                         |
| `namespace`        | string                                | false    |                                                                     |
| `subgraph`         | string                                | false    | The subgraph of the target model. Defaults to the current subgraph. |
| `relationshipType` | [RelationshipType](#relationshiptype) | true     | Type of the relationship - object or array.                         |

#### RelationshipType

Type of the relationship.

**One of the following values:**

| Value    | Description                                      |
| -------- | ------------------------------------------------ |
| `Object` | Select one related object from the target.       |
| `Array`  | Select multiple related objects from the target. |
