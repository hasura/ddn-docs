---
sidebar_position: 2
sidebar_label: Supergraph Objects
description: "More info to come..."
keywords:
  - supergraph
toc_max_heading_level: 4
---

# Supergraph Objects

## Introduction

TODO...

## Metadata structure

### AuthConfig

Definition of the authentication configuration used by the API server.

| Name | Type | Required | Description |
| ---- | ---- | -------- | ----------- |
| `allowRoleEmulationBy` | `string` | `false` |  |
| `mode` |  | `true` | The configuration for the authentication mode to use - webhook or JWT. |



Example:

```yaml
allowRoleEmulationBy: admin
mode:
  webhook:
    url: http://auth_hook:3050/validate-request
    method: Post

```

#### AuthModeConfig

The configuration for the authentication mode to use - webhook or JWT.

| Name | Type | Required | Description |
| ---- | ---- | -------- | ----------- |
| `webhook` | `object` | `true` | The configuration of the authentication webhook. |

#### AuthHookConfig

The configuration of the authentication webhook.

| Name | Type | Required | Description |
| ---- | ---- | -------- | ----------- |
| `url` | `string` | `true` | The URL of the authentication webhook. |
| `method` | [`AuthHookMethod`](#authhookmethod) | `true` | The HTTP method to be used to make the request to the auth hook. |



Example:

```yaml
url: http://auth_hook:3050/validate-request
method: Post

```

| Name | Type | Required | Description |
| ---- | ---- | -------- | ----------- |
| `jwt` | `object` | `true` | JWT config according to which the incoming JWT will be verified and decoded to extract the session variable claims. |

#### JWTConfig

JWT config according to which the incoming JWT will be verified and decoded to extract the session variable claims.

| Name | Type | Required | Description |
| ---- | ---- | -------- | ----------- |
| `audience` |  | `false` | Optional validation to check that the `aud` field is a member of the `audience` recieved, otherwise will throw error. |
| `issuer` | `string,null` | `false` | Optional validation to check that the `iss` field is a member of the `iss` received, otherwise will throw error. |
| `allowedSkew` | `integer,null` | `false` | Allowed leeway (in seconds) to the `exp` validation to account for clock skew. |
| `claimsConfig` | [`JWTClaimsConfig`](#jwtclaimsconfig) | `true` | Claims config. Either specified via `claims_mappings` or `claims_namespace_path` |
| `tokenLocation` | [`JWTTokenLocation`](#jwttokenlocation) | `true` | Source of the JWT authentication token. |
| `key` | [`JWTKey`](#jwtkey) | `true` | Mode according to which the JWT auth is configured. |



Example:

```yaml
audience: null
issuer: null
allowedSkew: null
claimsConfig:
  namespace:
    claimsFormat: Json
    location: /https:~1~1hasura.io~1jwt~1claims
tokenLocation:
  type: BearerAuthorization
key:
  fixed:
    algorithm: HS256
    key:
      value: token

```

#### JWTClaimsConfig

Config to describe how/where the engine should look for the claims within the decoded token.

| Name | Type | Required | Description |
| ---- | ---- | -------- | ----------- |
| `locations` | `object` | `true` | Can be used when Hasura claims are not all present in the single object, but individual claims are provided a JSON pointer within the decoded JWT and optionally a default value. |

#### JWTClaimsMap

Can be used when Hasura claims are not all present in the single object, but individual claims are provided a JSON pointer within the decoded JWT and optionally a default value.

| Name | Type | Required | Description |
| ---- | ---- | -------- | ----------- |
| `x-hasura-default-role` | [`JWTClaimsMappingEntry`](#jwtclaimsmappingentry) | `true` | JSON pointer to lookup the default role within the decoded JWT. |
| `x-hasura-allowed-roles` | [`JWTClaimsMappingEntry`](#jwtclaimsmappingentry) | `true` | JSON pointer to lookup the allowed roles within the decoded JWT. |

#### JWTClaimsMappingEntry

| Name | Type | Required | Description |
| ---- | ---- | -------- | ----------- |
| `literal` | `string` | `true` |  |

| Name | Type | Required | Description |
| ---- | ---- | -------- | ----------- |
| `path` | `object` | `true` |  |

#### JWTClaimsMappingPathEntry

| Name | Type | Required | Description |
| ---- | ---- | -------- | ----------- |
| `path` | `string` | `true` | JSON pointer to find the particular claim in the decoded JWT token. |
| `default` | `string` | `false` | Default value to be used when no value is found when looking up the value using the `path`. |

#### JWTClaimsMappingEntry

| Name | Type | Required | Description |
| ---- | ---- | -------- | ----------- |
| `literal` |  | `true` |  |

| Name | Type | Required | Description |
| ---- | ---- | -------- | ----------- |
| `path` | `object` | `true` |  |

#### JWTClaimsMappingPathEntry

| Name | Type | Required | Description |
| ---- | ---- | -------- | ----------- |
| `path` | `string` | `true` | JSON pointer to find the particular claim in the decoded JWT token. |
| `default` |  | `false` | Default value to be used when no value is found when looking up the value using the `path`. |

| Name | Type | Required | Description |
| ---- | ---- | -------- | ----------- |
| `namespace` | `object` | `true` | Used when all of the Hasura claims are present in a single object within the decoded JWT. |

#### JWTClaimsNamespace

Used when all of the Hasura claims are present in a single object within the decoded JWT.

| Name | Type | Required | Description |
| ---- | ---- | -------- | ----------- |
| `claimsFormat` | [`JWTClaimsFormat`](#jwtclaimsformat) | `true` | Format in which the Hasura claims will be present. |
| `location` | `string` | `true` | Pointer to lookup the Hasura claims within the decoded claims. |

#### JWTClaimsFormat

#### JWTTokenLocation

Source of the Authorization token

| Name | Type | Required | Description |
| ---- | ---- | -------- | ----------- |
| `type` | `string` | `true` |  |

#### JWTCookieLocation

Get the token from the Cookie header under the specificied cookie name.

| Name | Type | Required | Description |
| ---- | ---- | -------- | ----------- |
| `type` | `string` | `true` |  |
| `name` | `string` | `true` |  |

#### JWTHeaderLocation

Custom header from where the header should be parsed from.

| Name | Type | Required | Description |
| ---- | ---- | -------- | ----------- |
| `type` | `string` | `true` |  |
| `name` | `string` | `true` |  |

#### JWTKey

JWT key configuration according to which the incoming JWT will be decoded.

| Name | Type | Required | Description |
| ---- | ---- | -------- | ----------- |
| `fixed` | `object` | `true` | JWT Secret config according to which the incoming JWT will be decoded. |

#### JWTKeyConfig

JWT Secret config according to which the incoming JWT will be decoded.

| Name | Type | Required | Description |
| ---- | ---- | -------- | ----------- |
| `algorithm` | [`JWTAlgorithm`](#jwtalgorithm) | `true` | The algorithm used to decode the JWT. |
| `key` | [`EnvironmentValue`](#environmentvalue) | `true` | The key to use for decoding the JWT. |

#### JWTAlgorithm

The algorithm used to decode the JWT.

#### EnvironmentValue

Either a literal string or a reference to a Hasura secret

| Name | Type | Required | Description |
| ---- | ---- | -------- | ----------- |
| `value` | `string` | `true` |  |

| Name | Type | Required | Description |
| ---- | ---- | -------- | ----------- |
| `valueFromEnv` | `string` | `true` |  |

| Name | Type | Required | Description |
| ---- | ---- | -------- | ----------- |
| `jwkFromUrl` | `string` | `true` |  |

