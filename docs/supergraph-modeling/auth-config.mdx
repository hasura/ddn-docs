---
sidebar_label: AuthConfig
description: "Configure the authentication configuration used by the API server in Hasura."
seoFrontMatterUpdated: true
toc_max_heading_level: 4
sidebar_position: 14
---

# AuthConfig

## Introduction

The `AuthConfig` object is used to define the authentication configuration used by the API. With Hasura, you can utilize
either webhooks or JWTs for authentication. **The AuthConfig object belongs to the supergraph** and can be defined
**once** across your supergraph in **any subgraph** of your choice using one of the following modes:

| Mode                | Description                                                                                                                            |
| ------------------- | -------------------------------------------------------------------------------------------------------------------------------------- |
| [noAuth](#noAuth)   | This is enabled by default and allows you to connect to your API without any authentication. **It is not recommended for production.** |
| [JWT](#jwt)         | This allows you to use JWTs for authentication.                                                                                        |
| [Webhook](#webhook) | This allows you to use a custom webhook for authentication.                                                                            |

You can learn more about Hasura's approach to using existing authentication systems in the
[authentication section](/auth/authentication/index.mdx).

## How AuthConfig works

### Lifecycle

By default, all projects are created with an `AuthConfig` object in the **globals** subgraph in a `noAuth` mode that
doesn't use any auth service and doesn't allow setting session variables with API requests. Meaning that your API is, by
default, fully public and exposed if deployed live.

However, you would want update the `AuthConfig` to use a custom webhook or JWT service for authentication to restrict
access to your API and make use of Hasura's powerful [authorization](/auth/authorization/index.mdx) features. The
metadata examples below can help you configure your `AuthConfig` object to use your own custom webhook or JWT service.

An AuthConfig object is required to be defined in the supergraph metadata. If not defined, any attempted builds will not
be successful.

To make an update AuthConfig available in your supergraph, after updating your metadata, you'll need to
[create a new build](/cli/commands/ddn_supergraph_build_local.mdx) using the CLI.

### Examples

Each example below offers numerous customizations. However, we've provided a basic example for each mode to get you
started. Check the reference table for more information on each field.

#### noAuth {#noAuth}

```yaml title="An AuthConfig for noAuth mode:"
kind: AuthConfig
version: v2
definition:
  mode:
    noAuth:
      role: admin
      sessionVariables: {}
```

| **Field**          | **Description**                                                                                                                                                                                                                  | **Reference**                                    |
| ------------------ | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------ |
| `role`             | The role to be assumed while running the engine in `noAuth` mode.                                                                                                                                                                | [Role](#authconfig-role)                         |
| `sessionVariables` | Static session variables that will be used while running the engine without authentication. This is helpful when you want to test requests using particular session variables, such as `x-hasura-user-id` with a non-admin role. | [SessionVariables](#authconfig-sessionvariables) |

#### JWT

```yaml title="An AuthConfig for JWT mode:"
kind: AuthConfig
version: v2
definition:
  mode:
    jwt:
      claimsConfig:
        namespace:
          claimsFormat: Json
          location: /claims.jwt.hasura.io
      tokenLocation:
        type: BearerAuthorization
      key:
        fixed:
          algorithm: HS256
          key:
            valueFromEnv: AUTH_SECRET
```

| **Field**       | **Description**                                                                                                                                                                                                                                                                     | **Reference**                                    |
| --------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------ |
| `claimsConfig`  | Configuration to describe how and where the engine should look for the claims within the decoded token. You can vary the format and location of the claims.                                                                                                                         | [JWTClaimsConfig](#authconfig-jwtclaimsconfig)   |
| `tokenLocation` | Specifies the source of the JWT authentication token and how it should be parsed.                                                                                                                                                                                                   | [JWTTokenLocation](#authconfig-jwttokenlocation) |
| `key`           | Configuration for the JWT key, specifying how the incoming JWT will be verified and decoded. In this example, we've used a fixed key that's stored as an environment variable in our root-level `.env` file that is also mapped to the `subgraph.yaml` in our `/globals` directory. | [JWTKey](#authconfig-jwtkey)                     |

#### Webhook

```yaml title="An AuthConfig for Webhook mode:"
kind: AuthConfig
version: v2
definition:
  mode:
    webhook:
      url: http://auth_hook:3050/validate-request
      method: Post
```

| **Field** | **Description**                                                                           | **Reference**                                |
| --------- | ----------------------------------------------------------------------------------------- | -------------------------------------------- |
| `url`     | The URL of the authentication webhook that will be called to validate authentication.     | [AuthHookConfig](#authconfig-authhookconfig) |
| `method`  | The HTTP method (`Get` or `Post`) that will be used to make the request to the auth hook. | [AuthHookMethod](#authconfig-authhookmethod) |

---

## Metadata structure


#### AuthConfig {#authconfig-authconfig}

Definition of the authentication configuration used by the API server.


**One of the following values:**

| Value | Description |
|-----|-----|
| [AuthConfigV1](#authconfig-authconfigv1) | Definition of the authentication configuration v1, used by the API server. |
| [AuthConfigV2](#authconfig-authconfigv2) | Definition of the authentication configuration v2, used by the API server. |



#### AuthConfigV2 {#authconfig-authconfigv2}

Definition of the authentication configuration v2, used by the API server.

| Key | Value | Required | Description |
|-----|-----|-----|-----|
| `kind` | `AuthConfig` | true |  |
| `version` | `v2` | true |  |
| `definition` | [AuthConfigV2](#authconfig-authconfigv2) | true | Definition of the authentication configuration v2, used by the API server. |



#### AuthConfigV1 {#authconfig-authconfigv1}

Definition of the authentication configuration v1, used by the API server.

| Key | Value | Required | Description |
|-----|-----|-----|-----|
| `kind` | `AuthConfig` | true |  |
| `version` | `v1` | true |  |
| `definition` | [AuthConfigV1](#authconfig-authconfigv1) | true | Definition of the authentication configuration v1, used by the API server. |
