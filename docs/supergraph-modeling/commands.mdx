---
sidebar_position: 6
sidebar_label: Commands
description:
  "Begin executing business logic directly from your GraphQL API using Hasura Data Domain Specification commands.
  Connect to REST endpoints, custom servers or serverless functions and better manage your back-end functions."
keywords:
  - hasura commands
  - hasura dds
  - graphql api
  - business logic
  - data connector
  - rest endpoint
  - custom server
  - serverless function
  - graphql instruction
  - command configuration
seoFrontMatterUpdated: true
toc_max_heading_level: 4
---

# Commands

## Introduction

Commands are backed by **functions** or **procedures** declared in a
[`DataConnectorLink`](/supergraph-modeling/data-connectors.mdx) allowing you to execute business logic directly from
your GraphQL API. You can use them to validate, process or enrich data, call another API, or even log a user in.

Commands are the metadata representation of these functions or procedures. As an example, if we have a TypeScript
function connected using the [Node.js Lambda connector](https://github.com/hasura/ndc-nodejs-lambda):

```typescript
/**
 * @readonly Exposes the function as an NDC function (the function should only query data without making modifications)
 */
export function hello(name?: string) {
  return `hello ${name ?? "world"}`;
}
```

It would be represented in our metadata as the following command:

```yaml
---
kind: Command
version: v1
definition:
  name: Hello
  outputType: String!
  arguments:
    - name: name
      type: String
  source:
    dataConnectorName: <connector_name>
    dataConnectorCommand:
      function: hello
  graphql:
    rootFieldName: app_hello
    rootFieldKind: Query
```

:::info Automatically track commands

When using `ddn dev`, the CLI will automatically track functions in your `functions.ts` file as commands after
generating their [types](/supergraph-modeling/types.mdx). However, you can also use define these commands manually in
your metadata.

Check out the custom [business logic section](#) for guidance on how to add functions and procedures using the Node.js
Lambda connector.

:::

### Functions vs. Procedures

Functions are used for **read** operations. They will not modify the data in the database. They can only be used to
retrieve data. As relationships are a querying construct, **only functions** can be used in relationships.

Procedures are used for **write** operations. They can modify the data in the database. They can be used to create,
update, or delete data.

## Metadata structure

### Command

The definition of a command. A command is a user-defined operation which can take arguments and returns an output. The
semantics of a command are opaque to the Open DD specification.

| Key          | Schema                  | Required | Description |
| ------------ | ----------------------- | -------- | ----------- |
| `kind`       | `Command`               | true     |             |
| `version`    | `v1`                    | true     |             |
| `definition` | [CommandV1](#commandv1) | true     |             |

#### CommandV1

Definition of an OpenDD Command, which is a custom operation that can take arguments and returns an output. The
semantics of a command are opaque to OpenDD.

| Key           | Schema                                                       | Required | Description                                                                                                      |
| ------------- | ------------------------------------------------------------ | -------- | ---------------------------------------------------------------------------------------------------------------- |
| `name`        | [CommandName](#commandname)                                  | true     | The name of the command.                                                                                         |
| `outputType`  | [TypeReference](#typereference)                              | true     | The return type of the command.                                                                                  |
| `arguments`   | [[ArgumentDefinition](#argumentdefinition)]                  | false    | The list of arguments accepted by this command. Defaults to no arguments.                                        |
| `source`      | [CommandSource](#commandsource) / null                       | false    | The source configuration for this command.                                                                       |
| `graphql`     | [CommandGraphQlDefinition](#commandgraphqldefinition) / null | false    | Configuration for how this command should appear in the GraphQL schema.                                          |
| `description` | string                                                       | false    | The description of the command. Gets added to the description of the command's root field in the graphql schema. |

**Example:**

```yaml
name: get_latest_article
outputType: commandArticle
arguments: []
source:
  dataConnectorName: data_connector
  dataConnectorCommand:
    function: latest_article
  argumentMapping: {}
graphql:
  rootFieldName: getLatestArticle
  rootFieldKind: Query
description: Get the latest article
```

#### CommandGraphQlDefinition

The definition of how a command should appear in the GraphQL API.

| Key             | Schema                                        | Required | Description                                                                                                            |
| --------------- | --------------------------------------------- | -------- | ---------------------------------------------------------------------------------------------------------------------- |
| `rootFieldName` | [GraphQlFieldName](#graphqlfieldname)         | true     | The name of the graphql root field to use for this command.                                                            |
| `rootFieldKind` | [GraphQlRootFieldKind](#graphqlrootfieldkind) | true     | Whether to put this command in the Query or Mutation root of the GraphQL API.                                          |
| `deprecated`    | [Deprecated](#deprecated) / null              | false    | Whether this command root field is deprecated. If set, this will be added to the graphql schema as a deprecated field. |

**Example:**

```yaml
rootFieldName: getLatestArticle
rootFieldKind: Query
```

#### GraphQlRootFieldKind

Whether to put this command in the Query or Mutation root of the GraphQL API.

**Value:** `Query` / `Mutation`

#### CommandSource

Description of how a command maps to a particular data connector

| Key                    | Schema                                        | Required | Description                                                                 |
| ---------------------- | --------------------------------------------- | -------- | --------------------------------------------------------------------------- |
| `dataConnectorName`    | [DataConnectorName](#dataconnectorname)       | true     | The name of the data connector backing this command.                        |
| `dataConnectorCommand` | [DataConnectorCommand](#dataconnectorcommand) | true     | The function/procedure in the data connector that backs this command.       |
| `argumentMapping`      | [undefined](#undefined)                       | false    | Mapping from command argument names to data connector table argument names. |

**Example:**

```yaml
dataConnectorName: data_connector
dataConnectorCommand:
  function: latest_article
argumentMapping: {}
```

#### undefined

Mapping from command argument names to data connector table argument names.

| Key           | Schema | Required | Description |
| ------------- | ------ | -------- | ----------- |
| `<customKey>` | string | false    |             |

#### DataConnectorCommand

The function/procedure in the data connector that backs this command.

**Must have exactly one of the following fields:**

| Key         | Schema | Required | Description |
| ----------- | ------ | -------- | ----------- |
| `function`  | string | false    |             |
| `procedure` | string | false    |             |

#### CommandName

The name of a command.

**Value:** string
