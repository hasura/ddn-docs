---
sidebar_position: 2
sidebar_label: Configuration
description:
  "Learn about the configuration process for Hasura's Data Delivery Network. Discover detailed instructions on utilizing
  Hasura CLI for efficient project management, configuring build profiles and subgraphs."
keywords:
  - hasura ddn
  - data delivery network
  - hasura cli
  - project configuration
  - hasura metadata management
  - yaml configuration
  - api development
  - hasura build profiles
  - hasura subgraphs
  - hasura project management
seoFrontMatterUpdated: true
---

# Configuration

## Introduction

Hasura v3 introduces a new configuration for local projects.

## Sample project directory structure

The following is a sample directory structure of a local project:

```bash
.
├── .devcontainer
│  └── devcontainer.json
├── .env.engine
├── .gitattributes
├── .hasura
│  └── context.yaml
├── .vscode
├── docker-compose.hasura.yaml
├── engine
│  ├── auth_config.json
│  ├── metadata.json
│  └── open_dd.json
├── hasura.yaml
├── otel-collector-config.yaml
├── supergraph.yaml
└── supergraph_globals
   ├── .env.supergraph_globals
   ├── auth-config.hml
   ├── compatibility-config.hml
   └── graphql-config.hml
```

## Types of files

The new configuration relies on the following types of files:

| File type                                | Description                                                                                                              |
| ---------------------------------------- | ------------------------------------------------------------------------------------------------------------------------ |
| [`hasura.yaml`](#hasurayaml)             | The file that denotes the root of a Hasura project.                                                                      |
| [`.env.*`](#envfiles)                    | Files that store environment variables.                                                                                  |
| [`supergraph.yaml`](#supergraphfiles)    | Files that describe how to build the supergraph.                                                                         |
| [`connector.yaml`](#connectoryaml)       | Files that describe how to build a data connector.                                                                       |
| `*.hml`                                  | Hasura metadata files for a project.                                                                                     |
| [`supergraph_globals`](#supergraphfiles) | A directory, containing all the necessary configuration and metadata files, for the supergraph-level scope of a project. |
| [`.hasura/context.yaml`](#contextfile)   | File that stores certain default values of a project.                                                                    |
| `docker-compose.*.yaml`                  | Docker Compose files for local development.                                                                              |
| [`engine`](#engine)                      | Files mounted to the engine container for local development.                                                             |
| `otel-collector-config.yaml`             | Configuration for OpenTelemetry Collector used for seeing traces during local development.                               |

### hasura.yaml {#hasurayaml}

`hasura.yaml` appears at the root of a Hasura project.

```yaml
version: v2
```

The `version` section is used to specify the version of the project directory structure.

### .env.\* {#envfiles}

This file is used to store environment variables. The file should be in the format:

```.env
ENV1=val1
ENV2=val2
```

These files are referenced inside:

- Docker Compose files: Docker Compose files use \*.env files to specify environment variables needed for containers.
- Supergraph files (such as `supergraph.yaml`): Supergraph files use \*.env files to specify environment variables
  needed by `supergraph_globals` and subgraphs. Each subgraph can have its own .env file.
- Connector files (such as `connector.yaml`): Connector files use \*.env files to specify environment variables needed
  for building the connector.

### Supergraph files {#supergraph-manifests}

These files tell Hasura DDN how to construct your supergraph. It will contain information such as which subgraphs to
include and which resources to use for the build.

For example:

```yaml
kind: Supergraph
version: v1
definition:
  supergraph_globals:
    generator:
      rootPath: ./supergraph_globals
    envFile: ./supergraph_globals/.env.supergraph_globals
    includePaths:
      - ./supergraph_globals/auth-config.hml
      - ./supergraph_globals/compatibility-config.hml
      - ./supergraph_globals/graphql-config.hml
  subgraphs:
    app:
      generator:
        rootPath: app
      envFile: app/.env.app
      includePaths:
        - app/metadata
```

By default, the CLI generates a file called `supergraph.yaml` but any number of Supergraph files can be created and
referenced in CLI commands.

`includePaths` specify the directories and files where metadata for the `supergraph_globals` and subgraphs can be found.
If a directory is specified, all the \*.hml files inside the directory and its subdirectories will be used to construct
the metadata.

`generator`.`rootPath` specifies the directory into which any new files will be generated.

### Supergraph Globals {#supergraphfiles}

The `supergraph_globals` directory contains the supergraph configuration files. The four included files are:

```bash
├── .env.supergraph_globals
├── auth-config.hml
├── compatibility-config.hml
└── graphql-config.hml
```

:::info Organizing files

The contents of these files include the necessary metadata objects to build your supergraph. We've separated them out
into files organized by their purpose, but you can organize them anyway you like so long as the metadata objects within
them are all included.

:::

Each of these files' contents are used to configure the supergraph.

The `auth-config.hml` file contains the authentication configuration for the supergraph, allowing you to utilize either
JWTs or webhooks.

The `compatibility-config.hml` file contains the compatibility configuration — using a version number — for the
supergraph.

The `graphql-config.hml` file contains the GraphQL configuration for the supergraph, which allows you to customize the
available query and mutation capabilities along with the schema.

The `.env.supergraph_globals` file contains all the environment variables required by the supergraph global objects.

### connector.yaml {#connectoryaml}

Specifies the connector details.

For example:

```yaml
kind: Connector
version: v1
definition:
  name: mypg
  source: hasura/postgres:v0.7.0
  context: .
  envFile: .env.local
```

`version` is the version of the connector, `name` is a name given to the connector, `source` is the connector to use
specific to the data source, `context` specifies the connector directory and `envFile` specifies the connector specific
environment variables to use for introspecting and building the connector.

### .hasura/context.yaml {#contextfile}

This specifies the default DDN project and supergraph file path. The default values are used by all commands that accept
a `--supergraph` flag and `--project` flag. The flags can be used to override the default values.

```yaml
context:
  project: emerging-stag-9129
  supergraph: ../supergraph.yaml
```

This file is configured by the `ddn context set` command.

### Engine {#engine}

The `engine` directory contains the files required for Hasura v3 engine container. This directory has the following
structure:

```bash
├── .env.engine
├── auth_config.json
├── metadata.json
└── open_dd.json
```

The `.env.engine` file specifies environment variables required by the Hasura v3 engine container.

The `auth_config.json`, `metadata.json` and `open_dd.json` are generated as a result of `ddn supergraph build local`
command and does not need to be edited by the user.
