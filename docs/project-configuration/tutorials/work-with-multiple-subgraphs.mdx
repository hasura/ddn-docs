---
sidebar_position: 3
sidebar_label: Work with multiple subgraphs
description: ""
keywords:
  - hasura
  - hasura ddn
---

# Work with Multiple Subgraphs

## Introduction

Learn how to manage multiple subgraphs in Hasura DDN to streamline team ownership, enforce clear data boundaries, and
scale your API easily. This tutorial will show you how to structure your project for flexibility and collaboration,
ensuring efficient and adaptable API development.

In this tutorial, you'll learn how to:

- How to organize your project into subgraphs
- How to create a subgraph as part of your local project
- How to create a subgraph on a cloud project

We'll demonstrate this by creating a supergraph with two subgraphs: one owned by a `ux` team and another owned by the
`billing` team.

This tutorial should take less than ten minutes.

## Step 1. Initialize a new local project

```sh title="Create the project directory and move into it:"
ddn supergraph init subgraph-example && cd subgraph-example
```

## Step 2. Create a new `billing` subgraph

```sh title="Use the DDN CLI to create the subgraph in your local metadata:"
ddn subgraph init billing
```

You'll see a new `billing` directory added to your local project. The CLI pre-configured this with all the necessary
files and subdirectories to contain data connectors and their metadata.

```sh title="Then, add it to your supergraph.yaml config:"
ddn subgraph add billing --subgraph ./billing/subgraph.yaml --target-supergraph ./supergraph.yaml
```

```yaml title="You can verify this by opening the supergraph.yaml in the root of your project. You should see the following:"
kind: Supergraph
version: v2
definition:
  subgraphs:
    - globals/subgraph.yaml
    - app/subgraph.yaml
    # highlight-start
    - billing/subgraph.yaml
    # highlight-end
```

## Step 3. Create a cloud project

```sh title="Using your default context, create a new cloud project:"
ddn project init
```

Your `.hasura/context.yaml` will be updated to reflect the new project name. The `default` context of this project is
now linked to the cloud project you just created.

Additionally, the CLI will output information about each subgraph that it generated in your cloud project, including
`billing`.

## Step 4. Create a new build on your production project

```sh title="Finally, create a new build on your cloud project:"
ddn supergraph build create
```

The CLI will return a console URL which you can navigate to; within the `Explorer` tab, you'll find your project's
subgraphs, including `billing`.

:::info Adding subgraphs to existing cloud projects

The information above assumes you're starting from a new local project and haven't yet created a cloud project. If you
have an existing cloud project, and attempt to create this build, you'll receive an error. You need to explicitly add
the subgraphs to an existing project using the CLI.

```sh title="Complete steps 1-3 and, before attempting to create a build, run the following:"
ddn project subgraph create <name_of_subgraph>
```

:::

## Next steps

In the example above, you learned the steps to organize your project into multiple subgraphs for clearer ownership
between teams. To take this a step further, many teams prefer to implement multi-repository setups wherein a single
subgraph can be added to an existing or private team repository. Learn more
[here](/project-configuration/tutorials/work-with-multiple-repositories.mdx).
