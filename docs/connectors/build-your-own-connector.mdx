---
sidebar_position: 6
sidebar_label: Build your own
description: Build your own native data connector for Hasura
keywords:
  - hasura
  - graphql
  - data connector
  - csv
  - sendgrid
---

# Build Your Own Connector

You can build your own connector using one of our SDKs. Currently, we have the following available:

- [Rust Data Connector SDK](https://github.com/hasura/ndc-hub#rusk-sdk)

Alternatively, you can implement the NDC spec directly, or use the Typescript connector for simple functions and procedures.

## Example: CSV Connector - Direct NDC Spec Implementation

The NDC Specification documentation can be found [here](https://hasura.github.io/ndc-spec/overview.html) and a guide,
based on developing a connector for CSVs, can be found [here](https://hasura.github.io/ndc-spec/tutorial/index.html).
You can use this guide as a reference to build your own connector.

## Limitations

* Complex input types in procedures

## Example: Sendgrid Connector - Rust SDK

An example of implementing the Sendgrid API can be found [on Github here](https://github.com/hasura/ndc-sendgrid/).

An overview of the architecture of the project can be found in the [README.md](https://github.com/hasura/ndc-sendgrid/#sendgrid-connector).

It can be summarized as follows:

* The connector is designed to work via the [`hasura3 connector` plugin](https://hasura.io/docs/latest/hasura-cli/connector-plugin/) deployment method.
* As with all connector-plugin connectors, the connector is built and run as defined in its [Dockerfile](https://github.com/hasura/ndc-sendgrid/blob/main/Dockerfile)
  * The `Dockerfile`:
    * Installs system dependencies
    * Builds the Rust Cargo Project
    * Copies the relase build
    * Starts the server reading the configuration from `/config.json`
* The connector is implemented using the [Rust Data Connector SDK](https://github.com/hasura/ndc-hub#rusk-sdk)
  * The [`main` entrypoint](https://github.com/hasura/ndc-sendgrid/blob/main/crates/ndc-sendgrid/src/main.rs)
      uses the SDK's `default_main` method invoked with our `SendGridConnector` implementation of the `Connector` trait.
  * The most important aspects of this implementation are
    * Defining its `SendGridConfiguration` that includes its API Key.
    * Exposing its `/schema`
    * Providing a `/query` to list email templates
    * Providing a `/mutation` to send emails
  * The [SendGrid API interactions](https://github.com/hasura/ndc-sendgrid/blob/main/crates/ndc-sendgrid/src/sendgrid_api.rs) expose
    * `invoke_list_function_templates`, and
    * `invoke_send_mail`
* With all this in place the connector can be used by referencing [the repository](https://github.com/hasura/ndc-sendgrid)
  `> hasura3 connector create sendgrid:v1 --github-repo-url https://github.com/hasura/ndc-sendgrid/tree/main --config-file config.json`
* The running connector can then be referenced in Hasura V3 Metadata
  * Leveraged by the LSP
  * Targeted by the engine
  * Recieve Translated GraphQL Queries

## Example: Sendgrid Connector - Typescript Connector

The [Typescript Connector](https://github.com/hasura/ndc-typescript-deno/) provides a simple way to deploy Typescript functions as data connectors.
There is no need to implement an API, use an SDK, or write a Dockerfile.
Simply provide a Typescript function to the Typescript Connector and it will be deployed and executed within the [Deno](https://deno.com/) runtime.

As an example, we can write a Sendgrid connector consisting of the following two files:

`functions/sendgrid.ts`:

```typescript
import { sendSimpleMail, IResult } from 'https://deno.land/x/sendgrid@0.0.3/mod.ts';

export async function send(subject: string, to: string, from: string, plain: string, html: string ): Promise<IResult> {
	const API_KEY = Deno.env.get("SENDGRID_API_KEY");

  if(! API_KEY) {
		throw new Error('Error: SENDGRID_API_KEY environment variable must be set.');
	}

	const response = await sendSimpleMail(
		{
			subject,
			to: [{ email: to }],
			from: { email: from },
			content: [
				{ type: "text/plain", value: plain },
				{ type: "text/html", value: html },
			],
		},
		{
			apiKey: API_KEY,
		},
	);

	return response;
}
```

`config.json`:
```json
{
  "typescript_source": "/functions/sendgrid.ts"
}
```

The file `config.json` tells the Typescript Connector where to find our Typescript function. The file `functions/sendgrid.ts` contains the function itself.

To deploy the connector you can use the command

```bash
> hasura3 connector create sendgrid:deno:v1 --github-repo-url https://github.com/hasura/ndc-typescript-deno/tree/main --config-file config.json --volume ./functions:/functions --env SENDGRID_API_KEY='YOUR_SENDGRID_API_KEY'
```

The example code shown here can be found [on Github](https://github.com/hasura/ndc-sendgrid-deno).