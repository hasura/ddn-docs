---
sidebar_position: 3
sidebar_label: Custom Mutations
description:
  "Custom mutations allow you to run custom SQL queries on your PostgreSQL database. This page explains how to configure
  custom mutations in Hasura."
keywords:
  - native queries
  - custom mutations
seoFrontMatterUpdated: false
---

# Custom Mutations

## Introduction

Custom mutations allow you to run custom SQL queries on your PostgreSQL database that can be exposed via the Hasura 
GraphQL and modify the database state. As point-to-point mutations are not yet, this is one way to mutate data
using your GraphQL API.

:::danger Permissions not yet supported

Custom mutations do not yet support permissions. This means that any user with access to the GraphQL API can execute
custom mutations. Ensure that you have appropriate security measures in place to prevent unauthorized access. An update
on this feature will be provided in an upcoming release.

:::

## Example

Native Query mutations can be defined the same way as [custom queries](/connectors/postgresql/native-queries/custom-queries.mdx), with 
a few important tweaks:

1. The Native Query should include a field `isProcedure: true`.
2. The SQL should include a `RETURNING` clause, listing the returned columns (use `RETURNING *` to return all columns).

The Same [Native Queries SQL Requirements](/connectors/postgresql/native-queries/index.mdx#native-queries-sql-requirements) apply.

### Configuration

Here's an example which inserts into a table called `"Artist"`:

```yaml
"nativeQueries": {
  "insert_artist": {
    "isProcedure": true,
    "sql": {
      "inline": "INSERT INTO public.\"Artist\" VALUES ({{id}}, {{name}}) RETURNING *"
    },
    "columns": {
      "ArtistId": {
        "name": "ArtistId",
        "type": {
          "scalarType": "int4"
        }
      },
      "Name": {
        "name": "Name",
        "type": {
          "scalarType": "varchar"
        }
      }
    },
    "arguments": {
      "id": {
        "name": "id",
        "type":{
          "scalarType": "int4"
        }
      },
      "name": {
        "name": "name",
        "type": {
          "scalarType": "varchar"
        }
      }
    }
  }
}
```

To expose a Native Query mutation via the GraphQL API, add it as a procedure
[command](/supergraph-modeling/commands.mdx) to the Hasura metadata.

### Usage

You can now run the mutation in your GraphQL API:

```graphql
mutation {
  insert_artist(id: 100, name: "New Artist") {
    ArtistId
    Name
  }
}
```