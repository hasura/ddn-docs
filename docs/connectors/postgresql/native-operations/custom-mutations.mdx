---
sidebar_position: 3
sidebar_label: Native Mutations
description:
  "Native Mutations allow you to run custom SQL queries on your PostgreSQL database. This page explains how to configure
  Native Mutations in Hasura."
keywords:
  - native operations
  - custom mutations
seoFrontMatterUpdated: false
---

# Native Mutations

## Introduction

Native Mutations allow you to run custom SQL queries on your PostgreSQL database that can be exposed via the Hasura
GraphQL engine and modify the database state. As point-to-point mutations are not yet supported, this is one way to
mutate data using your GraphQL API.

## Setup

Native Mutations can be defined by adding them to the `metadata.nativeQueries` section of the `configuration.json` for a
particular connector.

Each mutation is specified as SQL. The return structure of the query must be explicitly specified in the `columns`
field.

Native Mutations can take arguments using the `{{argument_name}}` syntax. Arguments must be specified along with their
type.

The arguments are not interpolated, but provided to your data source as parameters, and therefore must be specific
values, not arbitrary SQL.

:::danger Permissions not yet supported

Native Mutations do not yet support permissions. This means that any user with access to the GraphQL API can execute
Native Mutations. Ensure that you have appropriate security measures in place to prevent unauthorized access. An update
on this feature will be provided in an upcoming release.

:::

## Example

Native Mutations can be defined the same way as
[native queries](/connectors/postgresql/native-operations/custom-queries.mdx), with a few important tweaks:

1. The Native Mutations should include a field `isProcedure: true`.
2. The SQL should include a `RETURNING` clause, listing the returned columns (use `RETURNING *` to return all columns).

### Configuration

Here's an example which inserts into a table called `"Artist"`:

```yaml
"nativeQueries":
  {
    "insert_artist":
      {
        "isProcedure": true,
        "sql": { "inline": 'INSERT INTO public."Artist" VALUES ({{id}}, {{name}}) RETURNING *' },
        "columns":
          {
            "ArtistId": { "name": "ArtistId", "type": { "scalarType": "int4" } },
            "Name": { "name": "Name", "type": { "scalarType": "varchar" } },
          },
        "arguments":
          {
            "id": { "name": "id", "type": { "scalarType": "int4" } },
            "name": { "name": "name", "type": { "scalarType": "varchar" } },
          },
      },
  }
```

:::tip Valid Native Mutation syntax

Check out our page on writing valid Hasura DDN
[Native Operation syntax](/connectors/postgresql/native-operations/syntax.mdx).

:::

To expose a Native Mutation via the GraphQL API, add it as a procedure [command](/supergraph-modeling/commands.mdx) to
the Hasura metadata.

### Usage

You can now run the mutation in your GraphQL API:

```graphql
mutation {
  insert_artist(id: 100, name: "New Artist") {
    ArtistId
    Name
  }
}
```
