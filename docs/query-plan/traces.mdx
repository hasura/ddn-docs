---
sidebar_position: 4
sidebar_label: Traces
description:
  "Learn how to leverage OpenTelemetry traces to track user requests across various services in the Hasura Data Delivery
  Network. Understand how to diagnose and debug potential failure points and monitor performance for better application
  management."
keywords:
  - hasura ddn
  - traces
  - tracing
  - graphql api
  - opentelemetry
  - application debugging
  - application performance
  - user request tracking
  - api monitoring
  - application management
seoFrontMatterUpdated: true
---

# Traces

## Introduction

[Distributed traces](https://opentelemetry.io/docs/concepts/signals/traces/) track and map journeys of user requests
across various services or components.

Traces are typically used to diagnose or debug which part of your application could potentially be responsible for a
failure or error state and to monitor the performance of end-user interactions with your application.

Traces are generated by instrumenting application code. Hasura DDN instruments all API queries with the OpenTelemetry
format and supports tracing out of the box. **This means that you don't have to set up your own OpenTelemetry
collector.** Simply head to the `Query Tracing` tab from `Settings` for a project's Console, and you'll see traces for
all your API requests.

## Spans

Spans represent the basic unit of work in a distributed system. They describe the operation that an individual component
of the system is doing, such as the time taken to execute a function or a request.

Every request to your GraphQL API will have a unique `trace-id` associated with it and may have the following spans:

- `/graphql`
  - `handle_authentication`
    - `execute_authentication`
  - `handle_request`
    - `execute_query`
      - `execute`
        - `execute_ndc_query`
          - `Execute Query`
            - `<Connector spans>`
        - `execute_ndc_mutation`
          - `<Connector spans>`

| Span name                | Description                                                                                                                                                                                 |
| ------------------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `/graphql`               | The root span for every request to your GraphQL API.                                                                                                                                        |
| `handle_authentication`  | The span responsible for handling authentication before the request is executed by the engine.                                                                                              |
| `execute_authentication` | The span responsible for executing authentication, either using JWTs or via a Webhook.                                                                                                      |
| `handle_request`         | The span responsible for handling a GraphQL request after it is successfully authenticated by the engine.                                                                                   |
| `execute_query`          | The top-level span for executing a GraphQL query.                                                                                                                                           |
| `execute`                | The span responsible for executing each query in your GraphQL request. This span has an attribute `usage_counts` which describes all the models that were used as a part of this operation. |
| `execute_ndc_query`      | The span responsible for executing a single ndc query. This span has an attribute `field` which describes the schema type that was executed.                                                |
| `Execute Query`          | The span responsible for executing the generated query on the data source.                                                                                                                  |
| `execute_ndc_mutation`   | The span responsible for executing a single ndc mutation. This span has an attribute `field` which describes the field that was executed.                                                   |
| `<Connector spans>`      | Optional spans from connectors to which the engine sends requests.                                                                                                                          |

### Connector spans

Connectors can have internal spans that vary depending on the data source or business logic implemented. Those traces
are exported separately from the connector and are handled automatically if the connector is deployed to DDN cloud.
However, self-hosted connectors need to configure the variables below or connector traces will not be visible on the DDN
console:

- `OTEL_EXPORTER_OTLP_ENDPOINT`: https://gateway.otlp.hasura.io:443
- `OTEL_EXPORTER_OTLP_HEADERS`: `Authorization=pat <personal-access-token>`

:::info Personal Access Token (PAT)

You can generate a personal access token [here](https://cloud.hasura.io/account-settings/access-tokens).

:::
