---
sidebar_position: 3
title: Multi-Repository Deployment
description: "Deploy multiple repositories together in a coordinated deployment"
---

import Roles from "@site/docs/collaboration/_roles.mdx";
import Permissions from "@site/docs/collaboration/_permissions.mdx";

# Multi-Repository Deployment

For larger teams and larger projects, it can make sense to have multiple repositories contributing to the supergraph.

In this setup, one or more subgraphs are defined in each repository and depending on the role of the user, can be built
and applied to the supergraph independently.

You can seem more about setting up [collaboration](/collaboration/index.mdx) and [federation](/federation/overview.mdx)
in the relevant sections.

Deployment with a multi-repository setup is effectively the same as
[deploying from a single repository](/deployment/hasura-ddn/index.mdx), but with the considerations of managing your
context to reference the shared project, and also being aware of the differences in abilities of the users building and
deploying.

See the tables below for the roles and permissions of users on a Hasura DDN project.

<Roles />

Subgraph roles are only available on [DDN Advanced projects](https://hasura.io/pricing/ddn).

The following are the detailed permissions for the above roles:

<Permissions />

Only available on [DDN Advanced projects](https://hasura.io/pricing/ddn).

## Deployment Flow

### Supergraph and all subgraphs

Once your [context is set to the shared project](/deployment/hasura-ddn/context-and-environments.mdx), an `Owner` or an
`Admin` role can build and apply the supergraph including all subgraphs.

Even though all subgraphs are not in the same repo, the `ddn supergraph build create` command will build the supergraph
including all subgraphs which are on DDN cloud.

As always, `ddn supergraph build apply <supergraph-build-version>` will make it the active supergraph API.

`Subgraph Admin` and `Subgraph Developer` cannot build or apply supergraphs.

### Supergraph and specific subgraphs

An `Owner` or an `Admin` role can build and apply new supergraph and specify subgraphs to be built and applied.

You can also list the available builds of subgraphs to use with:

```bash
ddn subgraph build get
```

```bash title="Build a supergraph based on a specific build and with mutiple specific subgraphs"
ddn supergraph build create --subgraph-version <subgraph_name:subgraph_version> --subgraph-version <subgraph_name:subgraph_version>  --base-supergraph-version <supergraph_version>
```

See more about incremental builds [here](/deployment/hasura-ddn/incremental-builds.mdx).

### A single subgraph

An `Owner`, `Admin`, `Subgraph Admin` and `Subgraph Developer` role can build a single subgraph. All except
`Subgraph Developer` can apply a single subgraph.

```bash title="Build a single subgraph"
ddn subgraph build create --subgraph-version <subgraph_name:subgraph_version> --base-supergraph-version <supergraph_version>
```

```bash title="Apply a single subgraph. Unavailable for Subgraph Developer role"
ddn subgraph build apply --subgraph-version <subgraph_name:subgraph_version>
```
