---
sidebar_label: Filter based on nested objects fields
sidebar_position: 7
description:
  "Acquire proficiency use and filter query results with Hasura's nested objects fields. This guide provides explicit
  methodologies, practical examples, and common use-cases."
keywords:
  - hasura filters
  - hasura nested objects
  - graphql nesting
  - data querying
  - local relationships
  - database relationships
  - graphql tutorial
  - api management
seoFrontMatterUpdated: true
---

import GraphiQLIDE from "@site/src/components/GraphiQLIDE";

# Filter Based on Nested Objects Fields

## Introduction

You can filter query results by specifying conditions on nested fields within an object.

For example:

```graphql {2}
query {
  articles(where: { field: { nested_field: { _eq: "FieldValue" } } }) {
    id
    title
  }
}
```

## Applicable Fields for Nested Field Comparisons

Nested field comparisons can be made in the GraphQL API if:
- Field's type is an [Object Type](supergraph-modeling/types.mdx#objecttype-objecttype)
- Field is a [Relationship](supergraph-modeling/relationships.mdx)

## Filtering by Object Type Fields

To filter results based on a field within an object type, apply a condition to the nested field.

**Example:**

<GraphiQLIDE
  query={`{
  users (
    where: {
      profile: {
        age: { _gt: 30 }
      }
    }
  ) {
    id
    name
    profile {
      age
    }
  }
}`}
  response={`{
  "data": {
    "users": [
      {
        "id": 1,
        "name": "John Doe",
        "profile": {
          "age": 35
        }
      },
      {
        "id": 2,
        "name": "Jane Smith",
        "profile": {
          "age": 40
        }
      }
    ]
  }
}`}
/>

In this query, `profile` is an Object type field, and we filter users based on the condition that their
`profile.age` is greater than 30.

## Filtering by Relationship Fields

You can filter results based on conditions applied to the fields of the target model in a relationship.
The relationship can be of either Object or Array type.

**Example:** Filter by `Array` relationship fields.

<GraphiQLIDE
  query={`{
  authors (
    where: {
      books: {
        title: { _eq: "GraphQL Basics" }
      }
    }
  ) {
    id
    name
    books {
      title
    }
  }
}`}
  response={`{
  "data": {
    "authors": [
      {
        "id": 1,
        "name": "Alice Johnson",
        "books": [
          {
            "title": "GraphQL Basics"
          }
        ]
      },
      {
        "id": 3,
        "name": "Bob Lee",
        "books": [
          {
            "title": "GraphQL Basics"
          }
        ]
      }
    ]
  }
}`}
/>

In this query, `books` is an Array relationship, and we filter authors who have written a book titled "GraphQL Basics".

**Example:** Filter by `Object` relationship fields.

<GraphiQLIDE
  query={`{
  books (
    where: {
      author: {
        name: { _eq: "Alice Johnson" }
      }
    }
  ) {
    id
    title
    author {
      name
    }
  }
}`}
  response={`{
  "data": {
    "books": [
      {
        "id": 1,
        "title": "Learning GraphQL",
        "author": {
          "name": "Alice Johnson"
        }
      },
      {
        "id": 2,
        "title": "Advanced GraphQL",
        "author": {
          "name": "Alice Johnson"
        }
      }
    ]
  }
}`}
/>

In this query, `author` is an object relationship field, and we filter books where the `author.name` is "Alice Johnson".

### Data Connector Capability

For relationship filtering to be processed efficiently, the data connector must support the `relation_comparisons`
[relationships capability](https://hasura.github.io/ndc-spec/specification/capabilities.html). This allows the query engine
to push down relationship comparisons directly to the data connector, ensuring that filtering based on relationships is handled
at the data source level, improving performance and reducing unnecessary data transfer.

However, if the `relation_comparisons` capability is absent, the query engine will handle the relationship comparisons at
its own layer. In this case, the query engine fetches the relevant mapping field values of the relationship and constructs
the necessary comparison expressions. While this ensures that the query can still execute, it may result in less efficient
processing, as more data needs to be transferred to the query engine for evaluation. See [Performance of Relationship Comparisons](graphql-api/queries/filters/performance-relationship-comparisons.mdx)
for more details.

#### Compatibility Date

To utilize relationship comparisons without the `relation_comparisonss` capability, you must update the compatibility date.
For detailed instructions, please refer to the [Compatibility Config](supergraph-modeling/compatibility-config.mdx#bypass-relation_comparisons-ndc-capability).
